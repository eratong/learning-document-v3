<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mysql | 导航</title>
    <meta name="description" content="个人博客">
    <link rel="preload stylesheet" href="/learning-document-v3/assets/style.bc473f3c.css" as="style">
    
    <script type="module" src="/learning-document-v3/assets/app.8275c714.js"></script>
    <link rel="preload" href="/learning-document-v3/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/learning-document-v3/assets/chunks/framework.9bc23fa4.js">
    <link rel="modulepreload" href="/learning-document-v3/assets/chunks/theme.7679b91b.js">
    <link rel="modulepreload" href="/learning-document-v3/assets/data_后端_数据库_mysql.md.3212f226.lean.js">
    <link rel="icon" href=".vitepress/img/米饭.png">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-255ec12d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-ae3e3f51></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-ae3e3f51> Skip to content </a><!--]--><!----><header class="VPNav" data-v-255ec12d data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-0937f67c><div class="container" data-v-0937f67c><div class="title" data-v-0937f67c><div class="VPNavBarTitle has-sidebar" data-v-0937f67c data-v-86d1bed8><a class="title" href="/learning-document-v3/" data-v-86d1bed8><!--[--><!--]--><!----><!--[-->导航<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-0937f67c><div class="curtain" data-v-0937f67c></div><div class="content-body" data-v-0937f67c><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-0937f67c><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-0937f67c data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learning-document-v3/" tabindex="0" data-v-7f418b0f data-v-0b525393><!--[--><span data-v-0b525393>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/learning-document-v3/data/link" tabindex="0" data-v-7f418b0f data-v-0b525393><!--[--><span data-v-0b525393>联系方式</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-0937f67c data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-0937f67c data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg t="1693494709184" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6615" width="200" height="200"><path d="M99 679.1c-7.2 0-14-4.4-16.8-11.5-5.1-13.1-9.6-26.6-13.5-40.2-2.7-9.6 2.8-19.5 12.4-22.3 9.6-2.7 19.5 2.8 22.3 12.4 3.6 12.5 7.8 25 12.4 37.1 3.6 9.3-1 19.7-10.3 23.3-2.1 0.8-4.3 1.2-6.5 1.2z" fill="" p-id="6616"></path><path d="M512 953.4c-86.2 0-165.4-20-235.4-59.4-66-37.2-121.5-91.5-160.6-157-5.1-8.5-2.3-19.6 6.2-24.7 8.5-5.1 19.6-2.3 24.7 6.2C222.4 844.9 355.4 917.4 512 917.4c240.8 0 417.2-170.5 425.7-408H86.4c0.5 12.7 1.5 25.3 2.9 37.7 1.2 9.9-5.9 18.8-15.7 20-9.9 1.2-18.8-5.9-20-15.8-2.3-19.7-3.5-39.8-3.5-59.9 0-9.9 8.1-18 18-18h888c9.9 0 18 8.1 18 18 0 125.2-45.3 241-127.6 326.1-41.4 42.8-90.6 76.3-146.2 99.5-58 24.1-121.4 36.4-188.3 36.4zM693.1 285.9c-7.8 0-15.1-5.2-17.3-13.1-21-74.1-89.5-125.8-166.6-125.8s-145.6 51.7-166.6 125.8c-2.7 9.6-12.7 15.1-22.2 12.4-9.6-2.7-15.1-12.7-12.4-22.2 12.2-42.9 38.5-81.6 74.1-108.9 36.8-28.2 80.8-43.1 127.2-43.1 46.4 0 90.4 14.9 127.2 43.1 35.6 27.3 61.9 66 74.1 108.9 2.7 9.6-2.8 19.5-12.4 22.2-1.8 0.5-3.4 0.7-5.1 0.7z" fill="" p-id="6617"></path><path d="M908.7 509.4H116.3c-7.9 0-14.9-5.2-17.2-12.7-4.4-14.4-6.6-29.3-6.6-44.4 0-37.7 13.9-73.8 39.2-101.8 21.9-24.3 50.9-40.6 82.6-47 6.6-32.1 23.1-61.5 47.4-84 25.9-24 59.1-38.6 94.1-41.5 39.6-42.6 95-66.9 153.4-66.9 59.3 0 115.3 24.9 154.9 68.7 35.3 1.8 69 15.3 95.7 38.6 25.2 21.9 42.7 51.1 50.2 83.3 32 7.5 61 25 82.8 50.1 24.9 28.6 38.6 65.3 38.6 103.3 0 13.9-1.8 27.8-5.4 41.1-2.1 7.7-9.2 13.2-17.3 13.2z m-778.3-36h763.7c0.9-6.1 1.4-12.3 1.4-18.4 0-59.7-44.5-111.5-103.5-120.3-7.8-1.2-14-7.3-15.1-15.2-8.8-59.3-60.7-104-120.7-104h-0.3-0.1c-5.3 0-10.4-2.4-13.8-6.4-33-39.4-81.4-62-132.8-62-50.5 0-98.3 21.9-131.3 60.2-3.3 3.8-8 6.1-13 6.2-59.9 2-110.2 48.4-117.1 107.9-1 8.4-7.6 15-16 15.8-58.9 6.3-103.3 55.8-103.3 115.1 0 7.1 0.7 14.1 1.9 21.1z" fill="" p-id="6618"></path><path d="M416.4 288.8m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6619"></path><path d="M551.5 244.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6620"></path><path d="M666.8 387.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6621"></path><path d="M507.3 372.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6622"></path><path d="M323.2 387.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6623"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-0937f67c data-v-40855f84 data-v-a7b5672a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-a7b5672a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-a7b5672a><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-a7b5672a><div class="VPMenu" data-v-a7b5672a data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg t="1693494709184" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6615" width="200" height="200"><path d="M99 679.1c-7.2 0-14-4.4-16.8-11.5-5.1-13.1-9.6-26.6-13.5-40.2-2.7-9.6 2.8-19.5 12.4-22.3 9.6-2.7 19.5 2.8 22.3 12.4 3.6 12.5 7.8 25 12.4 37.1 3.6 9.3-1 19.7-10.3 23.3-2.1 0.8-4.3 1.2-6.5 1.2z" fill="" p-id="6616"></path><path d="M512 953.4c-86.2 0-165.4-20-235.4-59.4-66-37.2-121.5-91.5-160.6-157-5.1-8.5-2.3-19.6 6.2-24.7 8.5-5.1 19.6-2.3 24.7 6.2C222.4 844.9 355.4 917.4 512 917.4c240.8 0 417.2-170.5 425.7-408H86.4c0.5 12.7 1.5 25.3 2.9 37.7 1.2 9.9-5.9 18.8-15.7 20-9.9 1.2-18.8-5.9-20-15.8-2.3-19.7-3.5-39.8-3.5-59.9 0-9.9 8.1-18 18-18h888c9.9 0 18 8.1 18 18 0 125.2-45.3 241-127.6 326.1-41.4 42.8-90.6 76.3-146.2 99.5-58 24.1-121.4 36.4-188.3 36.4zM693.1 285.9c-7.8 0-15.1-5.2-17.3-13.1-21-74.1-89.5-125.8-166.6-125.8s-145.6 51.7-166.6 125.8c-2.7 9.6-12.7 15.1-22.2 12.4-9.6-2.7-15.1-12.7-12.4-22.2 12.2-42.9 38.5-81.6 74.1-108.9 36.8-28.2 80.8-43.1 127.2-43.1 46.4 0 90.4 14.9 127.2 43.1 35.6 27.3 61.9 66 74.1 108.9 2.7 9.6-2.8 19.5-12.4 22.2-1.8 0.5-3.4 0.7-5.1 0.7z" fill="" p-id="6617"></path><path d="M908.7 509.4H116.3c-7.9 0-14.9-5.2-17.2-12.7-4.4-14.4-6.6-29.3-6.6-44.4 0-37.7 13.9-73.8 39.2-101.8 21.9-24.3 50.9-40.6 82.6-47 6.6-32.1 23.1-61.5 47.4-84 25.9-24 59.1-38.6 94.1-41.5 39.6-42.6 95-66.9 153.4-66.9 59.3 0 115.3 24.9 154.9 68.7 35.3 1.8 69 15.3 95.7 38.6 25.2 21.9 42.7 51.1 50.2 83.3 32 7.5 61 25 82.8 50.1 24.9 28.6 38.6 65.3 38.6 103.3 0 13.9-1.8 27.8-5.4 41.1-2.1 7.7-9.2 13.2-17.3 13.2z m-778.3-36h763.7c0.9-6.1 1.4-12.3 1.4-18.4 0-59.7-44.5-111.5-103.5-120.3-7.8-1.2-14-7.3-15.1-15.2-8.8-59.3-60.7-104-120.7-104h-0.3-0.1c-5.3 0-10.4-2.4-13.8-6.4-33-39.4-81.4-62-132.8-62-50.5 0-98.3 21.9-131.3 60.2-3.3 3.8-8 6.1-13 6.2-59.9 2-110.2 48.4-117.1 107.9-1 8.4-7.6 15-16 15.8-58.9 6.3-103.3 55.8-103.3 115.1 0 7.1 0.7 14.1 1.9 21.1z" fill="" p-id="6618"></path><path d="M416.4 288.8m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6619"></path><path d="M551.5 244.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6620"></path><path d="M666.8 387.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6621"></path><path d="M507.3 372.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6622"></path><path d="M323.2 387.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z" fill="" p-id="6623"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-0937f67c data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-255ec12d data-v-5cfd5582><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5cfd5582><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-5cfd5582><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-5cfd5582>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5cfd5582 data-v-18201f51><button data-v-18201f51>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-255ec12d data-v-845b8fc6><div class="curtain" data-v-845b8fc6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-845b8fc6><span class="visually-hidden" id="sidebar-aria-label" data-v-845b8fc6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible collapsed" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>架构</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%9E%B6%E6%9E%84/%E6%9E%B6%E6%9E%84" data-v-9b797284><!--[--><p class="text" data-v-9b797284>架构设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%9E%B6%E6%9E%84/%E7%AE%97%E6%B3%95" data-v-9b797284><!--[--><p class="text" data-v-9b797284>算法逻辑</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%9E%B6%E6%9E%84/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" data-v-9b797284><!--[--><p class="text" data-v-9b797284>设计模式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%9E%B6%E6%9E%84/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F" data-v-9b797284><!--[--><p class="text" data-v-9b797284>操作系统</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible collapsed" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>后端语言</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/java/java" data-v-9b797284><!--[--><p class="text" data-v-9b797284>java</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/python/python" data-v-9b797284><!--[--><p class="text" data-v-9b797284>python</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/go/go" data-v-9b797284><!--[--><p class="text" data-v-9b797284>go</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible collapsed" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>微服务框架</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/elasticsearch" data-v-9b797284><!--[--><p class="text" data-v-9b797284>elasticsearch</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-9b797284 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h3 class="text" data-v-9b797284>配置中心</h3><!----></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/apollo" data-v-9b797284><!--[--><p class="text" data-v-9b797284>apollo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/nacos" data-v-9b797284><!--[--><p class="text" data-v-9b797284>nacos</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-9b797284 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h3 class="text" data-v-9b797284>注册中心</h3><!----></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/eureka" data-v-9b797284><!--[--><p class="text" data-v-9b797284>eureka</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/nacos" data-v-9b797284><!--[--><p class="text" data-v-9b797284>nacos</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-9b797284 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h3 class="text" data-v-9b797284>消息中间件</h3><!----></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/rabbitmq" data-v-9b797284><!--[--><p class="text" data-v-9b797284>rabbitmq</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/rocketmq" data-v-9b797284><!--[--><p class="text" data-v-9b797284>rocketmq</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka" data-v-9b797284><!--[--><p class="text" data-v-9b797284>kafka</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/mqtt" data-v-9b797284><!--[--><p class="text" data-v-9b797284>mqtt</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-9b797284 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h3 class="text" data-v-9b797284>定时任务</h3><!----></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-2 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/xxljob" data-v-9b797284><!--[--><p class="text" data-v-9b797284>xxljob</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible collapsed" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>部署</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%83%A8%E7%BD%B2/%E9%83%A8%E7%BD%B2" data-v-9b797284><!--[--><p class="text" data-v-9b797284>部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%83%A8%E7%BD%B2/tomcat" data-v-9b797284><!--[--><p class="text" data-v-9b797284>tomcat</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%83%A8%E7%BD%B2/nginx" data-v-9b797284><!--[--><p class="text" data-v-9b797284>nginx</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%83%A8%E7%BD%B2/docker" data-v-9b797284><!--[--><p class="text" data-v-9b797284>docker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%83%A8%E7%BD%B2/elk" data-v-9b797284><!--[--><p class="text" data-v-9b797284>elk</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%83%A8%E7%BD%B2/kubernetes" data-v-9b797284><!--[--><p class="text" data-v-9b797284>kubernetes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%83%A8%E7%BD%B2/zookeeper" data-v-9b797284><!--[--><p class="text" data-v-9b797284>zookeeper</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible collapsed" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>接口管理</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/swagger" data-v-9b797284><!--[--><p class="text" data-v-9b797284>swagger</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/smart-doc" data-v-9b797284><!--[--><p class="text" data-v-9b797284>smart-doc</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/yapi" data-v-9b797284><!--[--><p class="text" data-v-9b797284>yapi</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/knife4j" data-v-9b797284><!--[--><p class="text" data-v-9b797284>knife4j</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible has-active" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>数据库</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql" data-v-9b797284><!--[--><p class="text" data-v-9b797284>mysql</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/redis" data-v-9b797284><!--[--><p class="text" data-v-9b797284>redis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/mongodb" data-v-9b797284><!--[--><p class="text" data-v-9b797284>mongodb</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/postgresql" data-v-9b797284><!--[--><p class="text" data-v-9b797284>postgresql</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible collapsed" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>人工智能</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD" data-v-9b797284><!--[--><p class="text" data-v-9b797284>人工智能</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible collapsed" data-v-845b8fc6 data-v-9b797284><div class="item" role="button" tabindex="0" data-v-9b797284><div class="indicator" data-v-9b797284></div><h2 class="text" data-v-9b797284>面试</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9b797284><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-9b797284><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-9b797284><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%9D%A2%E8%AF%95" data-v-9b797284><!--[--><p class="text" data-v-9b797284>面试</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-9b797284 data-v-9b797284><div class="item" data-v-9b797284><div class="indicator" data-v-9b797284></div><a class="VPLink link link" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E9%9D%A2%E8%AF%95%E9%A2%982024" data-v-9b797284><!--[--><p class="text" data-v-9b797284>面试题2024</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-255ec12d data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>当前页导航</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _learning-document-v3_data_%E5%90%8E%E7%AB%AF_%E6%95%B0%E6%8D%AE%E5%BA%93_mysql" data-v-6b87e69f><div><h1 id="mysql" tabindex="-1">mysql <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;mysql&quot;">​</a></h1><h2 id="基础" tabindex="-1">基础 <a class="header-anchor" href="#基础" aria-label="Permalink to &quot;基础&quot;">​</a></h2><p>开源关系型数据库</p><p>官网 <a href="https://www.mysql.com/" target="_blank" rel="noreferrer">https://www.mysql.com/</a></p><h3 id="源码-c" tabindex="-1">源码(C++) <a class="header-anchor" href="#源码-c" aria-label="Permalink to &quot;源码(C++)&quot;">​</a></h3><h3 id="默认端口3306" tabindex="-1">默认端口3306 <a class="header-anchor" href="#默认端口3306" aria-label="Permalink to &quot;默认端口3306&quot;">​</a></h3><h3 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h3><p>一千万的数据怎么查询<br><a href="https://juejin.cn/post/7216650471746437157" target="_blank" rel="noreferrer">https://juejin.cn/post/7216650471746437157</a></p><p>一般来讲，单一数据库实例的数据的阈值在1TB之内</p><h3 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-label="Permalink to &quot;目录结构&quot;">​</a></h3><h3 id="数据类型" tabindex="-1">数据类型 <a class="header-anchor" href="#数据类型" aria-label="Permalink to &quot;数据类型&quot;">​</a></h3><h4 id="数值类型" tabindex="-1">数值类型 <a class="header-anchor" href="#数值类型" aria-label="Permalink to &quot;数值类型&quot;">​</a></h4><ul><li><strong>整数类型</strong><ul><li><code>TINYINT</code>：1字节，范围 -128 到 127 或 0 到 255（UNSIGNED）</li><li><code>SMALLINT</code>：2字节，范围 -32,768 到 32,767 或 0 到 65,535（UNSIGNED）</li><li><code>MEDIUMINT</code>：3字节，范围 -8,388,608 到 8,388,607 或 0 到 16,777,215（UNSIGNED）</li><li><code>INT</code> 或 <code>INTEGER</code>：4字节，范围 -2,147,483,648 到 2,147,483,647 或 0 到 4,294,967,295（UNSIGNED）</li><li><code>BIGINT</code>：8字节，范围 -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807 或 0 到 18,446,744,073,709,551,615（UNSIGNED）</li></ul></li><li><strong>浮点数类型</strong><ul><li><code>FLOAT</code>：4字节，单精度浮点数</li><li><code>DOUBLE</code>：8字节，双精度浮点数</li></ul></li><li><strong>定点数类型</strong><ul><li><code>DECIMAL(M, D)</code> 或 <code>NUMERIC(M, D)</code>：精确浮点数，其中 M 是总位数，D 是小数点后的位数</li></ul></li></ul><h4 id="字符串类型" tabindex="-1">字符串类型 <a class="header-anchor" href="#字符串类型" aria-label="Permalink to &quot;字符串类型&quot;">​</a></h4><ul><li><strong>字符类型</strong><ul><li><code>CHAR(M)</code>：固定长度字符类型，M 最多 255 字符</li><li><code>VARCHAR(M)</code>：可变长度字符类型，M 最多 65,535 字符</li></ul></li><li><strong>文本类型</strong><ul><li><code>TINYTEXT</code>：最大长度 255 字符</li><li><code>TEXT</code>：最大长度 65,535 字符</li><li><code>MEDIUMTEXT</code>：最大长度 16,777,215 字符</li><li><code>LONGTEXT</code>：最大长度 4,294,967,295 字符</li></ul></li><li><strong>二进制类型</strong><ul><li><code>BINARY(M)</code>：固定长度二进制字符串，M 最多 255 字节</li><li><code>VARBINARY(M)</code>：可变长度二进制字符串，M 最多 65,535 字节</li></ul></li><li><strong>二进制大对象类型</strong><ul><li><code>TINYBLOB</code>：最大长度 255 字节</li><li><code>BLOB</code>：最大长度 65,535 字节</li><li><code>MEDIUMBLOB</code>：最大长度 16,777,215 字节</li><li><code>LONGBLOB</code>：最大长度 4,294,967,295 字节</li></ul></li></ul><h4 id="日期和时间类型" tabindex="-1">日期和时间类型 <a class="header-anchor" href="#日期和时间类型" aria-label="Permalink to &quot;日期和时间类型&quot;">​</a></h4><ul><li><code>DATE</code>：日期值，格式为 &#39;YYYY-MM-DD&#39;</li><li><code>TIME</code>：时间值，格式为 &#39;HH:MM:SS&#39;</li><li><code>DATETIME</code>：日期和时间值，格式为 &#39;YYYY-MM-DD HH:MM:SS&#39;</li><li><code>TIMESTAMP</code>：时间戳，存储自 1970-01-01 00:00:00 UTC 以来的秒数</li><li><code>YEAR</code>：年份值，格式为 4 位 &#39;YYYY&#39; 或 2 位 &#39;YY&#39;（70-69 表示 1970-2069）</li></ul><h4 id="布尔类型" tabindex="-1">布尔类型 <a class="header-anchor" href="#布尔类型" aria-label="Permalink to &quot;布尔类型&quot;">​</a></h4><ul><li><code>BOOLEAN</code>：布尔类型，实际上是 <code>TINYINT(1)</code> 的同义词，0 表示 FALSE，非 0 表示 TRUE</li></ul><h4 id="枚举和集合类型" tabindex="-1">枚举和集合类型 <a class="header-anchor" href="#枚举和集合类型" aria-label="Permalink to &quot;枚举和集合类型&quot;">​</a></h4><ul><li><strong>枚举类型</strong><ul><li><code>ENUM(&#39;value1&#39;, &#39;value2&#39;, ...)</code>：枚举类型，存储一个预定义值的集合中的单个值</li></ul></li><li><strong>集合类型</strong><ul><li><code>SET(&#39;value1&#39;, &#39;value2&#39;, ...)</code>：集合类型，存储一个预定义值的集合中的多个值的组合</li></ul></li></ul><h4 id="空间类型" tabindex="-1">空间类型 <a class="header-anchor" href="#空间类型" aria-label="Permalink to &quot;空间类型&quot;">​</a></h4><ul><li><code>GEOMETRY</code>：几何数据类型</li><li><code>POINT</code>：点类型</li><li><code>LINESTRING</code>：线字符串类型</li><li><code>POLYGON</code>：多边形类型</li><li><code>MULTIPOINT</code>：多个点类型</li><li><code>MULTILINESTRING</code>：多个线字符串类型</li><li><code>MULTIPOLYGON</code>：多个多边形类型</li><li><code>GEOMETRYCOLLECTION</code>：几何集合类型</li></ul><h4 id="json-数据类型" tabindex="-1">JSON 数据类型 <a class="header-anchor" href="#json-数据类型" aria-label="Permalink to &quot;JSON 数据类型&quot;">​</a></h4><ul><li><code>JSON</code>：用于存储 JSON 格式的数据</li></ul><h4 id="自定义类型" tabindex="-1">自定义类型 <a class="header-anchor" href="#自定义类型" aria-label="Permalink to &quot;自定义类型&quot;">​</a></h4><ul><li><strong>自定义类型</strong>：可以通过 <code>CREATE TYPE</code> 语句来定义自定义类型</li></ul><h2 id="常用语句" tabindex="-1">常用语句 <a class="header-anchor" href="#常用语句" aria-label="Permalink to &quot;常用语句&quot;">​</a></h2><h3 id="mysql操作" tabindex="-1">mysql操作 <a class="header-anchor" href="#mysql操作" aria-label="Permalink to &quot;mysql操作&quot;">​</a></h3><h4 id="_1、查看mysql-服务有哪些ip地址在连接" tabindex="-1">1、查看mysql 服务有哪些ip地址在连接 <a class="header-anchor" href="#_1、查看mysql-服务有哪些ip地址在连接" aria-label="Permalink to &quot;1、查看mysql 服务有哪些ip地址在连接&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> information_schema.processlist</span></span></code></pre></div><p><img src="/learning-document-v3/assets/image-20221107173329511.ae59f405.png" alt="image-20221107173329511"></p><h4 id="_2、连接数查看" tabindex="-1">2、连接数查看 <a class="header-anchor" href="#_2、连接数查看" aria-label="Permalink to &quot;2、连接数查看&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> show </span><span style="color:#F78C6C;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Threads%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;  </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;font-style:italic;">-------------------+-------+  </span></span>
<span class="line"><span style="color:#A6ACCD;">| Variable_name     | </span><span style="color:#F78C6C;">Value</span><span style="color:#A6ACCD;"> |  </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;font-style:italic;">-------------------+-------+  </span></span>
<span class="line"><span style="color:#A6ACCD;">| Threads_cached    | </span><span style="color:#F78C6C;">58</span><span style="color:#A6ACCD;">    |  </span></span>
<span class="line"><span style="color:#A6ACCD;">| Threads_connected | </span><span style="color:#F78C6C;">57</span><span style="color:#A6ACCD;">    |   ###这个数值指的是打开的连接数  </span></span>
<span class="line"><span style="color:#A6ACCD;">| Threads_created   | </span><span style="color:#F78C6C;">3676</span><span style="color:#A6ACCD;">  |  </span></span>
<span class="line"><span style="color:#A6ACCD;">| Threads_running   | </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">     |   ###这个数值指的是激活的连接数，这个数值一般远低于connected数值  </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;font-style:italic;">-------------------+-------+  </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">Threads_connected 跟show processlist结果相同，表示当前连接数。准确的来说，Threads_running是代表当前并发数  </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">这是是查询数据库当前设置的最大连接数  </span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> show variables </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%max_connections%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;  </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;font-style:italic;">-----------------+-------+  </span></span>
<span class="line"><span style="color:#A6ACCD;">| Variable_name   | </span><span style="color:#F78C6C;">Value</span><span style="color:#A6ACCD;"> |  </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;font-style:italic;">-----------------+-------+  </span></span>
<span class="line"><span style="color:#A6ACCD;">| max_connections | </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">  |  </span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;font-style:italic;">-----------------+-------+  </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">可以在</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">my.cnf里面设置数据库的最大连接数  </span></span>
<span class="line"><span style="color:#A6ACCD;">[mysqld]  </span></span>
<span class="line"><span style="color:#A6ACCD;">max_connections </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span></span></code></pre></div><h4 id="_3、查看mysql版本" tabindex="-1">3、查看mysql版本 <a class="header-anchor" href="#_3、查看mysql版本" aria-label="Permalink to &quot;3、查看mysql版本&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">version</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><h4 id="_4、查看语句消耗资源情况" tabindex="-1">4、查看语句消耗资源情况 <a class="header-anchor" href="#_4、查看语句消耗资源情况" aria-label="Permalink to &quot;4、查看语句消耗资源情况&quot;">​</a></h4><p>是<code>MySQL</code>提供可以用来分析当前会话中<code>SQL</code>语句执行的资源消耗情况。可以用于<code>SQL</code>的调优测量。默认情况下，参数处于关闭状态，并保存最近 15 次的运行结果</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Show profiles;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 开启</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> profiling </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">PROFILE</span><span style="color:#A6ACCD;"> FOR QUERY </span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">PROFILE</span><span style="color:#A6ACCD;"> cpu,</span><span style="color:#F78C6C;">block</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">io</span><span style="color:#A6ACCD;"> FOR QUERY </span><span style="color:#F78C6C;">1</span></span></code></pre></div><h3 id="数据库操作" tabindex="-1">数据库操作 <a class="header-anchor" href="#数据库操作" aria-label="Permalink to &quot;数据库操作&quot;">​</a></h3><h4 id="_1、终止执行语句" tabindex="-1">1、终止执行语句 <a class="header-anchor" href="#_1、终止执行语句" aria-label="Permalink to &quot;1、终止执行语句&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show processlist;</span></span>
<span class="line"><span style="color:#F78C6C;">kill</span><span style="color:#A6ACCD;">  它的id</span></span></code></pre></div><h4 id="_2、查看语句执行计划-explain" tabindex="-1">2、查看语句执行计划 explain <a class="header-anchor" href="#_2、查看语句执行计划-explain" aria-label="Permalink to &quot;2、查看语句执行计划 explain&quot;">​</a></h4><p><img src="/learning-document-v3/assets/8651fb6730d54faa8345b95391f4cce4tplv-k3u1fbpfcp-zoom-in-crop-mark4536000.514d601f.webp" alt="img"></p><p>key_len表示使用的索引长度，key_len可以衡量索引的好坏，key_len越小 索引效果越好</p><h4 id="_3、查看线程执行情况" tabindex="-1">3、查看线程执行情况 <a class="header-anchor" href="#_3、查看线程执行情况" aria-label="Permalink to &quot;3、查看线程执行情况&quot;">​</a></h4><p>数据库连接过多<br> 有一条sql语句的执行时间过长<br> 锁表（锁表 state 显示lock）</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show processlist</span></span></code></pre></div><h4 id="_4、sql-执行顺序" tabindex="-1">4、sql 执行顺序 <a class="header-anchor" href="#_4、sql-执行顺序" aria-label="Permalink to &quot;4、sql 执行顺序&quot;">​</a></h4><p>order by 执行顺序在select之后，可以使用select的虚拟表</p><h3 id="表操作" tabindex="-1">表操作 <a class="header-anchor" href="#表操作" aria-label="Permalink to &quot;表操作&quot;">​</a></h3><h4 id="_1、创建表" tabindex="-1">1、创建表 <a class="header-anchor" href="#_1、创建表" aria-label="Permalink to &quot;1、创建表&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> `</span><span style="color:#82AAFF;">label</span><span style="color:#A6ACCD;">` (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">bigint</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;"> AUTO_INCREMENT COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主键id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">标签名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">remark</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">使用说明</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">create_user</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">创建人</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">update_user</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">更新人</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">create_time</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">datetime</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">创建时间</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">update_time</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">datetime</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> CURRENT_TIMESTAMP COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">更新时间</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">is_deleted</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">tinyint</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">是否被删除: 0:没删 ;1: 被删了</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">) ENGINE</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">InnoDB AUTO_INCREMENT</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1513418847613530114</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> CHARSET</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8mb4 COMMENT</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">标签表</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> `</span><span style="color:#82AAFF;">operation_log</span><span style="color:#A6ACCD;">` (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">bigint</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;"> AUTO_INCREMENT COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">主键id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">partner_id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">品牌id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">partner_name</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">品牌名称</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">tinyint</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">store_code</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">门店编号</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">store_name</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">门店名称</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">product_id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">商品编号</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">product_name</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">商品名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">order_code</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">订单号</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">ip</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ip</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">user_agent</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">application</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">应用</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">模块</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">action</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">操作事件</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">action_desc</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">操作事件中文描述</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">content</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">操作内容</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">create_user</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">创建人</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">create_time</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">datetime</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">创建时间</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">KEY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">idx_action</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">action</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">) ENGINE</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">InnoDB  </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> CHARSET</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8mb4;</span></span></code></pre></div><h4 id="_2、添加索引" tabindex="-1">2、添加索引 <a class="header-anchor" href="#_2、添加索引" aria-label="Permalink to &quot;2、添加索引&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">card</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> idx_partnerCode (partnerCode);</span></span>
<span class="line"><span style="color:#A6ACCD;"># 唯一索引</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">partner</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">app_id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">);     </span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">project_config</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">project_code</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">);  </span></span>
<span class="line"><span style="color:#A6ACCD;"># 联合索引</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 联合唯一索引</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> t_aa </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;">(aa,bb);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 联合主键</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> tb_name </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> (字段1,字段2,字段3);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> jw_resource </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">UNIQUE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">KEY</span><span style="color:#A6ACCD;">(resource_name, resource_type);</span></span></code></pre></div><h4 id="_3、表修改名字" tabindex="-1">3、表修改名字 <a class="header-anchor" href="#_3、表修改名字" aria-label="Permalink to &quot;3、表修改名字&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">log</span><span style="color:#A6ACCD;"> RENAME </span><span style="color:#F78C6C;">TO</span><span style="color:#A6ACCD;"> operation_log;</span></span></code></pre></div><h4 id="_4、表添加字段" tabindex="-1">4、表添加字段 <a class="header-anchor" href="#_4、表添加字段" aria-label="Permalink to &quot;4、表添加字段&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> operation_log</span></span>
<span class="line"><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">tinyint</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">类型</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> store_code </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">门店编号</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> store_name </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">门店名称</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> product_id </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">商品编号</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> product_name </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">商品名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> order_code </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">订单号</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><p>例如</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">coupon_info</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> COLUMN </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">city_code</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">城市编号</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><h4 id="_5、表修改字段名字" tabindex="-1">5、表修改字段名字 <a class="header-anchor" href="#_5、表修改字段名字" aria-label="Permalink to &quot;5、表修改字段名字&quot;">​</a></h4><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> order_delivery </span><span style="color:#F78C6C;">MODIFY</span><span style="color:#A6ACCD;"> province_name </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">省份名称</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><h4 id="_6、查询" tabindex="-1">6、查询 <a class="header-anchor" href="#_6、查询" aria-label="Permalink to &quot;6、查询&quot;">​</a></h4><h5 id="_1-group-by" tabindex="-1">① group by <a class="header-anchor" href="#_1-group-by" aria-label="Permalink to &quot;① group by&quot;">​</a></h5><p>select的参数和group by的一致</p><h5 id="_2-查询数量" tabindex="-1">② 查询数量 <a class="header-anchor" href="#_2-查询数量" aria-label="Permalink to &quot;② 查询数量&quot;">​</a></h5><p>count(*)包括了所有的列，相当于行数，在统计结果的时候，不会忽略列值为NULL</p><p>count(1)包括了忽略所有列，用1代表代码行，在统计结果的时候，不会忽略列值为NULL</p><p>count(列名)只包括列名那一列，在统计结果的时候，会忽略列值为空（这里的空不是只空字符串或者0，而是表示null）</p><p>如果列为主键，count(列名)效率优于count<br> 如果列不为主键，count(1)效率优于count(列名)<br> 如果表中存在主键，count(主键列名)效率最优 <br> 如果表中只有一列，则count(<em>)效率最优<br> 如果表有多列，且不存在主键，则count(1)效率优于count(</em>)</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 一分钟内订单量</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> orders </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> channel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">206</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> create_time</span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;">DATE_SUB(</span><span style="color:#F78C6C;">NOW</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">,INTERVAL </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">MINUTE</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><h5 id="_4-having-count" tabindex="-1">④ having count <a class="header-anchor" href="#_4-having-count" aria-label="Permalink to &quot;④ having count&quot;">​</a></h5><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 表里面 name出现次数大于2的</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> t_user </span><span style="color:#F78C6C;">GROUP BY</span><span style="color:#A6ACCD;"> userName </span><span style="color:#F78C6C;">HAVING</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">COUNT</span><span style="color:#A6ACCD;">(userName)</span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">HAVING</span><span style="color:#A6ACCD;"> COUNT是分组后数据比较 </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> count </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> report_config </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> count</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><h4 id="_7、表联查" tabindex="-1">7、表联查 <a class="header-anchor" href="#_7、表联查" aria-label="Permalink to &quot;7、表联查&quot;">​</a></h4><h5 id="_1-内连接" tabindex="-1">① 内连接 <a class="header-anchor" href="#_1-内连接" aria-label="Permalink to &quot;① 内连接&quot;">​</a></h5><p><a href="https://www.cnblogs.com/buxingzhelyd/p/7853454.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/buxingzhelyd/p/7853454.html</a></p><p>1、UPDATE</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> receipt </span><span style="color:#F78C6C;">INNER JOIN</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> msid </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> receipt </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> TotalIncome </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">) r </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> (receipt.msid</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">r.msid) </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> TotalIncome</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">10</span></span></code></pre></div><p>2、LEFT JOIN</p><p>左右数据比 1：多时</p><p>关联字段 右边有两个或多个 和左边有一样的时候 拼接总数会增加</p><p>左拼不是总数和左边一致</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> user u </span><span style="color:#F78C6C;">LEFT JOIN</span><span style="color:#A6ACCD;"> dept d </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> u.sn</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">d.sn</span></span></code></pre></div><p><img src="/learning-document-v3/assets/image-20221107164010082.0b42b0d3.png" alt="image-20221107164010082"></p><h3 id="常用sql" tabindex="-1">常用SQL <a class="header-anchor" href="#常用sql" aria-label="Permalink to &quot;常用SQL&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 一对多表 统计数量</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    a.doctor_id, </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">COUNT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#A6ACCD;"> b.parent_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> parent_count,  </span><span style="color:#676E95;font-style:italic;">-- 计算每个医生对应的家长数量</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">COUNT</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#A6ACCD;"> c.baby_id) </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> baby_count       </span><span style="color:#676E95;font-style:italic;">-- 计算每个医生对应的宝贝数量</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    a</span></span>
<span class="line"><span style="color:#F78C6C;">LEFT JOIN</span><span style="color:#A6ACCD;"> b </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> a.doctor_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b.doctor_id  </span><span style="color:#676E95;font-style:italic;">-- 连接医生与家长</span></span>
<span class="line"><span style="color:#F78C6C;">LEFT JOIN</span><span style="color:#A6ACCD;"> c </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> b.parent_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> c.parent_id  </span><span style="color:#676E95;font-style:italic;">-- 连接家长与宝贝</span></span>
<span class="line"><span style="color:#F78C6C;">GROUP BY</span><span style="color:#A6ACCD;"> a.doctor_id;</span></span></code></pre></div><h3 id="存储过程" tabindex="-1">存储过程 <a class="header-anchor" href="#存储过程" aria-label="Permalink to &quot;存储过程&quot;">​</a></h3><p>SQL 语句需要先编译然后执行，而存储过程(Stored Procedure)是一组为了完成特定功能 的 SQL 语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给定参数(如 果该存储过程带有参数)来调用执行它。 存储过程是可编程的函数，在数据库中创建并保存，可以由 SQL 语句和控制结构组成。当 想要在不同的应用程序或平台上执行相同的函数，或者封装特定功能时，存储过程是非常有 用的。数据库中的存储过程可以看做是对编程中面向对象方法的模拟，它允许控制数据的访 问方式。</p><p>存储过程的优点:</p><p>增强 SQL 语言的功能和灵活性; 标准组件式编程; 较快的执行速度; 减少网络流量; 作为一种安全机制来充分利用。</p><h2 id="事务" tabindex="-1">事务 <a class="header-anchor" href="#事务" aria-label="Permalink to &quot;事务&quot;">​</a></h2><h3 id="锁机制" tabindex="-1">锁机制 <a class="header-anchor" href="#锁机制" aria-label="Permalink to &quot;锁机制&quot;">​</a></h3><p>MySQL中的锁是在服务器层或者存储引擎层实现的</p><p><img src="/learning-document-v3/assets/8f39da277837b8b1a2351f90a0f70758.f6510650.png" alt="image-20221003154244472"></p><p>共享锁（读锁） 排它锁 （写锁）</p><h3 id="事务基本特性" tabindex="-1">事务基本特性 <a class="header-anchor" href="#事务基本特性" aria-label="Permalink to &quot;事务基本特性&quot;">​</a></h3><p>事务基本特性ACID分别是：<br><strong>原子性</strong>指的是一个事务中的操作要么全部成功，要么全部失败。<br><strong>一致性</strong>指的是数据库总是从一个一致性的状态转换到另外一个一致性的状态。比如A转账给B100块钱，假设中间sql执行过程中系统崩溃A也不会损失100块，因为事务没有提交，修改也就不会保存到数据库。<br><strong>隔离性</strong>指的是一个事务的修改在最终提交前，对其他事务是不可见的。<br><strong>持久性</strong>指的是一旦事务提交，所做的修改就会永久保存到数据库中。</p><h3 id="事务隔离级别" tabindex="-1">事务隔离级别 <a class="header-anchor" href="#事务隔离级别" aria-label="Permalink to &quot;事务隔离级别&quot;">​</a></h3><p>默认隔离级别 REPEATABLE-READ</p><p>SELECT @@global.tx_isolation;</p><p>隔离性有4个隔离级别分别是<br><strong>第一种隔离级别：Read uncommitted(读未提交)</strong><br> 如果一个事务已经开始写数据，则另外一个事务不允许同时进行写操作，但允许其他事务读此行数据，该隔离级别可以通过“排他写锁”，但是不排斥读线程实现。这样就避免了更新丢失，却可能出现脏读，也就是说事务B读取到了事务A未提交的数据<br><strong>解决了更新丢失，但还是可能会出现脏读</strong><br><strong>第二种隔离级别：Read committed(读提交)</strong><br> 如果是一个读事务(线程)，则允许其他事务读写，如果是写事务将会禁止其他事务访问该行数据，该隔离级别避免了脏读，但是可能出现不可重复读。事务A事先读取了数据，事务B紧接着更新了数据，并提交了事务，而事务A再次读取该数据时，数据已经发生了改变。<br><strong>解决了更新丢失和脏读问题</strong><br><strong>第三种隔离级别：Repeatable read(可重复读取)</strong><br> 可重复读取是指在一个事务内，多次读同一个数据，在这个事务还没结束时，其他事务不能访问该数据(包括了读写)，这样就可以在同一个事务内两次读到的数据是一样的，因此称为是可重复读隔离级别，读取数据的事务将会禁止写事务(但允许读事务)，写事务则禁止任何其他事务(包括了读写)，这样避免了不可重复读和脏读，但是有时可能会出现幻读。(读取数据的事务)可以通过“共享读镜”和“排他写锁”实现。<br><strong>解决了更新丢失、脏读、不可重复读、但是还会出现幻读</strong><br><strong>第四种隔离级别：Serializable(可序化)</strong><br> 提供严格的事务隔离，它要求事务序列化执行，事务只能一个接着一个地执行，但不能并发执行，如果仅仅通过“行级锁”是无法实现序列化的，必须通过其他机制保证新插入的数据不会被执行查询操作的事务访问到。序列化是最高的事务隔离级别，同时代价也是最高的，性能很低，一般很少使用，在该级别下，事务顺序执行，不仅可以避免脏读、不可重复读，还避免了幻读<br><strong>解决了更新丢失、脏读、不可重复读、幻读(虚读)</strong></p><p><img src="/learning-document-v3/assets/image-20221107163651169.b3a9b01d.png" alt="image-20221107163651169"></p><h2 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h2><h3 id="类型" tabindex="-1">类型 <a class="header-anchor" href="#类型" aria-label="Permalink to &quot;类型&quot;">​</a></h3><p>索引结构和查找算法 <a href="https://blog.csdn.net/zengdeqing2012/article/details/118309221" target="_blank" rel="noreferrer">https://blog.csdn.net/zengdeqing2012/article/details/118309221</a></p><h4 id="btree" tabindex="-1">btree <a class="header-anchor" href="#btree" aria-label="Permalink to &quot;btree&quot;">​</a></h4><p>插入满了会有分裂操作，来保证树的深度不高</p><p>不方便范围查找，要遍历整个左子树</p><p><img src="/learning-document-v3/assets/image-20221031181343836-16672112253853.ac972f5f.png" alt="image-20221031181343836"></p><p><img src="/learning-document-v3/assets/image-20221031181358382-16672112399545.ddaa18e1.png" alt="image-20221031181358382"></p><h4 id="b-tree" tabindex="-1">b+tree <a class="header-anchor" href="#b-tree" aria-label="Permalink to &quot;b+tree&quot;">​</a></h4><p>优缺<br> 索引提高了查询效率，但是每次修改和删除都要重新维护索引，修改删除性能会稍微降低</p><p>索引字段挑选<br> 用于查询的字段 唯一性较高的字段 使用比较频繁的字段 适合用来做索引，频繁修改的字段不适合</p><p>原理<br> 非叶子节点不存数据，只存索引，空间利用更高效<br> 叶子节点之间有双向链表，方便范围查找，只找到叶子节点所有左边的</p><p><img src="/learning-document-v3/assets/image-20221031181723083-16672114443747.50018aea.png" alt="image-20221031181723083"></p><p><img src="/learning-document-v3/assets/image-20221107163405940-16678100477474.9e13f1d8.png" alt="image-20221107163405940"></p><h4 id="hash索引" tabindex="-1">Hash索引 <a class="header-anchor" href="#hash索引" aria-label="Permalink to &quot;Hash索引&quot;">​</a></h4><h4 id="单列索引" tabindex="-1">单列索引 <a class="header-anchor" href="#单列索引" aria-label="Permalink to &quot;单列索引&quot;">​</a></h4><h4 id="联合索引-待处理" tabindex="-1">联合索引 待处理 <a class="header-anchor" href="#联合索引-待处理" aria-label="Permalink to &quot;联合索引 待处理&quot;">​</a></h4><p>MySQL可以使用多个字段同时建立一个索引，叫做联合索引。在联合索引中，如果想要命中索引，需要按照建立索引时的字段顺序挨个使用，否则无法命中索引。</p><h3 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h3><h4 id="索引失效" tabindex="-1">索引失效 <a class="header-anchor" href="#索引失效" aria-label="Permalink to &quot;索引失效&quot;">​</a></h4><h5 id="_1、全值匹配-最好的" tabindex="-1">1、全值匹配(最好的) <a class="header-anchor" href="#_1、全值匹配-最好的" aria-label="Permalink to &quot;1、全值匹配(最好的)&quot;">​</a></h5><h5 id="_2、最佳左前缀法则" tabindex="-1">2、最佳左前缀法则 <a class="header-anchor" href="#_2、最佳左前缀法则" aria-label="Permalink to &quot;2、最佳左前缀法则&quot;">​</a></h5><p>从索引最左列开始，并且不跳过索引中的列</p><p>跳过第一个，会索引失效<br> 跳过中间一个，只有第一个生效<br> 语句中索引列顺序可以颠倒，不影响从左到右的判断</p><h5 id="_3、索引列上使用函数会索引失效" tabindex="-1">3、索引列上使用函数会索引失效 <a class="header-anchor" href="#_3、索引列上使用函数会索引失效" aria-label="Permalink to &quot;3、索引列上使用函数会索引失效&quot;">​</a></h5><p>不使用计算、类型转换等函数，会导致索引失效</p><h5 id="_4、-和-范围条件右边的索引失效" tabindex="-1">4、&gt;和&lt;范围条件右边的索引失效 <a class="header-anchor" href="#_4、-和-范围条件右边的索引失效" aria-label="Permalink to &quot;4、&gt;和&lt;范围条件右边的索引失效&quot;">​</a></h5><p>组合索引中</p><p>a=0,b=0,c=0条件正常使用索引</p><p>a=0,b&gt;0,c=0会导致c索引失效</p><h5 id="_5、-和-会索引失效" tabindex="-1">5、!=和&lt;&gt;会索引失效 <a class="header-anchor" href="#_5、-和-会索引失效" aria-label="Permalink to &quot;5、!=和&lt;&gt;会索引失效&quot;">​</a></h5><h5 id="_6、or会" tabindex="-1">6、or会 <a class="header-anchor" href="#_6、or会" aria-label="Permalink to &quot;6、or会&quot;">​</a></h5><p>1.有or必全有索引;<br> 2.复合索引未用左列字段;<br> 3.like以%开头;<br> 4.需要类型转换;<br> 5.where中索引列有运算;<br> 6、is not null</p><h4 id="索引优化" tabindex="-1">索引优化 <a class="header-anchor" href="#索引优化" aria-label="Permalink to &quot;索引优化&quot;">​</a></h4><p>在实际业务中，id &gt;= 100000一般情况都是错误的，因为很多时候要带上各种筛选条件。所以如果有超过1000W数据做查询，最好的办法有2种：<br> 1、前端强制让缩小查询范围，超过X页后，让缩小范围查询，不让继续翻页。<br> 2、如果是MySQL、PostgreSQL等数据库，用ShardingJDBC之类的进行表拆分，设置好分表的键和数据源配置，单表数据量可以控制在100W内。比如1000W数据量，可以拆成20个表</p><p>优化</p><p>order by 字段建立索引</p><p>jion on 字段建立索引 都可以提高点性能</p><p>索引失效 Or isnull语句啥的</p><p>1.回表：</p><p>2.覆盖索引：</p><p>3.最左匹配:</p><p>4.索引下推：索引下推在非主键索引上的优化，可以有效减少回表的次数，大大提升了查询的效率。</p><h2 id="主从复制-读写分离" tabindex="-1">主从复制-读写分离 <a class="header-anchor" href="#主从复制-读写分离" aria-label="Permalink to &quot;主从复制-读写分离&quot;">​</a></h2><h3 id="基础-1" tabindex="-1">基础 <a class="header-anchor" href="#基础-1" aria-label="Permalink to &quot;基础&quot;">​</a></h3><p>主库负责写、从库负责读；读写分离前提是数据库主从复制</p><h3 id="形式" tabindex="-1">形式 <a class="header-anchor" href="#形式" aria-label="Permalink to &quot;形式&quot;">​</a></h3><p>一主一从<br> 一主多从<br> 多主一从<br> 双主复制<br> 级联复制</p><p><img src="/learning-document-v3/assets/02f55c6f3eb041a8bf861e1f9004a8d0tplv-k3u1fbpfcp-zoom-in-crop-mark4536000.c502bb8f.webp" alt="图片"></p><h3 id="类型-1" tabindex="-1">类型 <a class="header-anchor" href="#类型-1" aria-label="Permalink to &quot;类型&quot;">​</a></h3><p>异步复制：容易丢数据<br> 同步复制：性能差<br> 半同步复制<br> 延迟复制</p><p>1、基于语句的复制：主服务器上面执行的语句在从服务器上面再执行一遍，在 MySQL-3.23 版本以后支持<br> 2、基于行的复制：把主服务器上面改变后的内容直接复制过去，而不关心到底改变该内容是由哪条语句引发的，在 <code>MySQL-5.0</code> 版本以后引入。<br> 3、混合类型的复制：MySQL 默认使用 基于语句的复制，当 基于语句的复制 会引发问题的时候就会使用 基于行的复制，MySQL 会自动进行选择。</p><p><a href="https://juejin.cn/post/6967224081410162696" target="_blank" rel="noreferrer">https://juejin.cn/post/6967224081410162696</a></p><h3 id="优缺" tabindex="-1">优缺 <a class="header-anchor" href="#优缺" aria-label="Permalink to &quot;优缺&quot;">​</a></h3><p>负载均衡，容灾备份，高可用，高扩展</p><p>成本增加，数据延迟，写入变慢</p><h3 id="原理" tabindex="-1">原理 <a class="header-anchor" href="#原理" aria-label="Permalink to &quot;原理&quot;">​</a></h3><p>​ 说到读写分离，我们先了解下什么是主从复制。<br> ​ 主从复制，是用来建立一个和主数据库完全一样的数据库环境，称为从数据库，主数据库一般是准实时的业务数据库。一台服务器充当主服务器，而另外一台服务器充当从服务器。<br> ​ 此时主服务器会将更新信息写入到一个特定的二进制文件中，并会维护文件的一个索引用来跟踪日志循环，这个日志可以记录并发送到从服务器的更新中去。<br> 一台从服务器连接到主服务器时，从服务器会通知主服务器从服务器的日志文件中读取最后一次成功更新的位置。然后从服务器会接收从哪个时刻起发生的任何更新，然后锁住并等到主服务器通知新的更新。<br> 读写分离简单俩说就是基于主从复制架构，一个主库，有多个从库，主库主要负责写，写完后主库会自动把数据给同步给从库。</p><h4 id="复制过程" tabindex="-1">复制过程 <a class="header-anchor" href="#复制过程" aria-label="Permalink to &quot;复制过程&quot;">​</a></h4><ol><li>MySQL master 将数据变更写入二进制日志( <strong>binary log</strong> )</li><li>slave将master的binary log拷贝到它的中继日志（ <strong>relay log</strong> ）</li><li>slave重做中继日志中的事件，将数据变更反映它自己的数据</li></ol><p><img src="/learning-document-v3/assets/84eb58b899424dd79582141e312cacc1tplv-k3u1fbpfcp-zoom-in-crop-mark4536000.a4dee159.webp" alt="图片"></p><h4 id="涉及线程" tabindex="-1">涉及线程 <a class="header-anchor" href="#涉及线程" aria-label="Permalink to &quot;涉及线程&quot;">​</a></h4><p>1、主库log dump线程<br> 2、从库I/O线程<br> 3、从库sql线程</p><p><img src="/learning-document-v3/assets/1f2f0147457449c59a22ee644197cc85tplv-k3u1fbpfcp-zoom-in-crop-mark4536000.f18ab54b.webp" alt="20201122115623506.png"></p><p><a href="https://juejin.cn/post/7129390559168299039" target="_blank" rel="noreferrer">https://juejin.cn/post/7129390559168299039</a></p><h3 id="实际操作" tabindex="-1">实际操作 <a class="header-anchor" href="#实际操作" aria-label="Permalink to &quot;实际操作&quot;">​</a></h3><h4 id="_1、docker主从搭建" tabindex="-1">1、docker主从搭建 <a class="header-anchor" href="#_1、docker主从搭建" aria-label="Permalink to &quot;1、docker主从搭建&quot;">​</a></h4><h5 id="_1-使用docker拉取mysql" tabindex="-1">① 使用docker拉取mysql <a class="header-anchor" href="#_1-使用docker拉取mysql" aria-label="Permalink to &quot;① 使用docker拉取mysql&quot;">​</a></h5><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker pull mysql:</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">37</span></span></code></pre></div><h5 id="_2-创建配置文件" tabindex="-1">② 创建配置文件 <a class="header-anchor" href="#_2-创建配置文件" aria-label="Permalink to &quot;② 创建配置文件&quot;">​</a></h5><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">mkdir </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">master</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">data</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">master</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">slave</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">data</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">slave</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">cd </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">master</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">touch my.cnf</span></span>
<span class="line"><span style="color:#A6ACCD;">vim </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">master</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">my.cnf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">cd </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">slave</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">touch my.cnf</span></span>
<span class="line"><span style="color:#A6ACCD;">vim </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">slave</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">my.cnf</span></span></code></pre></div><p>master配置my.cnf内容如下</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">[mysqld]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#[必须]服务器唯一ID，默认是1</span></span>
<span class="line"><span style="color:#F78C6C;">server</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#打开Mysql日志，日志格式为二进制</span></span>
<span class="line"><span style="color:#F78C6C;">log</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">=/</span><span style="color:#A6ACCD;">var</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">lib</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">binlog</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#每次执行写入就与硬盘同步</span></span>
<span class="line"><span style="color:#A6ACCD;">sync</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">binlog</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#关闭名称解析</span></span>
<span class="line"><span style="color:#F78C6C;">skip</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">name</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">resolve</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#只保留7天的二进制日志，以防磁盘被日志占满</span></span>
<span class="line"><span style="color:#A6ACCD;">expire</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">logs</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">days</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#需要同步的二进制数据库名</span></span>
<span class="line"><span style="color:#A6ACCD;">binlog</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">do</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#不备份的数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">binlog</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">ignore</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">information_schema</span></span>
<span class="line"><span style="color:#A6ACCD;">binlog</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">ignore</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">performation_schema</span></span>
<span class="line"><span style="color:#A6ACCD;">binlog</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">ignore</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">sys</span></span>
<span class="line"><span style="color:#A6ACCD;">binlog</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">ignore</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">!includedir </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf.d</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">!includedir </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql.conf.d</span><span style="color:#89DDFF;">/</span></span></code></pre></div><p>slave配置my.cnf内容如下</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">[mysqld]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#配置server</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">id，让从服务器有唯一ID号</span></span>
<span class="line"><span style="color:#F78C6C;">server</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#开启从服务器二进制日志</span></span>
<span class="line"><span style="color:#F78C6C;">log</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">=/</span><span style="color:#A6ACCD;">var</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">lib</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">binlog</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#打开mysql中继日志，日志格式为二进制</span></span>
<span class="line"><span style="color:#A6ACCD;">relay_log</span><span style="color:#89DDFF;">=/</span><span style="color:#A6ACCD;">var</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">lib</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">relay</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#设置只读权限</span></span>
<span class="line"><span style="color:#F78C6C;">read_only</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#使得更新的数据写进二进制日志中</span></span>
<span class="line"><span style="color:#A6ACCD;">log_slave_updates</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">#如果salve库名称与master库名相同，使用本配置</span></span>
<span class="line"><span style="color:#A6ACCD;">replicate</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">do</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">!includedir </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf.d</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">!includedir </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql.conf.d</span><span style="color:#89DDFF;">/</span></span></code></pre></div><h5 id="_3-创建容器" tabindex="-1">③ 创建容器 <a class="header-anchor" href="#_3-创建容器" aria-label="Permalink to &quot;③ 创建容器&quot;">​</a></h5><p>创建master容器</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker run </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">d </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#F78C6C;">3311</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">3306</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">--name mysql-master -v /usr/local/mysql/master/data:/var/lib/mysql -v /usr/local/mysql/master/conf/my.cnf:/etc/mysql/my.cnf -v /etc/localtime:/etc/localtime -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7.37</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 查看容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps</span></span>
<span class="line"><span style="color:#A6ACCD;"># 查看所有容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker ps </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">a</span></span>
<span class="line"><span style="color:#A6ACCD;"># 启动容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#F78C6C;">start</span><span style="color:#A6ACCD;"> [CONTAINER ID]</span></span>
<span class="line"><span style="color:#A6ACCD;"># 进入容器</span></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#F78C6C;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">it mysql</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">master</span><span style="color:#A6ACCD;"> bash </span></span>
<span class="line"><span style="color:#A6ACCD;"># 进入MySQL</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">uroot </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p123456</span></span>
<span class="line"><span style="color:#A6ACCD;"># 查看日志和状态</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">master</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">status</span><span style="color:#A6ACCD;">;  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 创建新用户</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#A6ACCD;"> mysql;</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">user</span><span style="color:#A6ACCD;"> &#39;</span><span style="color:#82AAFF;">backup</span><span style="color:#A6ACCD;">&#39; identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">GRANT</span><span style="color:#A6ACCD;"> ALL </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> test.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">backup</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">GRANT</span><span style="color:#A6ACCD;"> REPLICATION SLAVE </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TO</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">backup</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"># 刷一下权限</span></span>
<span class="line"><span style="color:#A6ACCD;">flush privileges;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 查看用户？？？？</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 创建数据库和表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> `</span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;">` </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8mb4 </span><span style="color:#C792EA;">collate</span><span style="color:#A6ACCD;"> utf8mb4_general_ci;</span></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#A6ACCD;"> test;</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> `</span><span style="color:#82AAFF;">user</span><span style="color:#A6ACCD;">`  (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> utf8mb4 </span><span style="color:#C792EA;">COLLATE</span><span style="color:#A6ACCD;"> utf8mb4_general_ci </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">age</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">USING</span><span style="color:#A6ACCD;"> BTREE</span></span>
<span class="line"><span style="color:#A6ACCD;">) ENGINE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> InnoDB AUTO_INCREMENT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> utf8mb4 </span><span style="color:#C792EA;">COLLATE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> utf8mb4_general_ci ROW_FORMAT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">Dynamic</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zhangsan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">28</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">lisi</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><p>创建slave容器</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker run </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">d </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#F78C6C;">3312</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">3306</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">--name mysql-slave -v /usr/local/mysql/slave/data:/var/lib/mysql -v /usr/local/mysql/slave/conf/my.cnf:/etc/mysql/my.cnf -v /etc/localtime:/etc/localtime -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7.37</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#F78C6C;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">it mysql</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">slave bash</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">uroot </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p123456</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># 停止slave的IO线程</span></span>
<span class="line"><span style="color:#F78C6C;">stop</span><span style="color:#A6ACCD;"> slave;</span></span>
<span class="line"><span style="color:#A6ACCD;"># 配置master库信息</span></span>
<span class="line"><span style="color:#A6ACCD;">change </span><span style="color:#F78C6C;">master</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> master_host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xx.xx.xx.xx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,master_port</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">3311</span><span style="color:#A6ACCD;">,master_user</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">backup</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,master_password</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,master_log_file</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">binlog.000003</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,master_log_pos</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">154</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"># 开启slave的IO线程</span></span>
<span class="line"><span style="color:#F78C6C;">start</span><span style="color:#A6ACCD;"> slave;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">show slave </span><span style="color:#F78C6C;">status</span><span style="color:#A6ACCD;">\G;</span></span></code></pre></div><p>命令 change master to 参数说明<br> ​ 执行 change master to命令后的信息保存在 /var/lib/mysql/master.info 和 relay-log.info 两个文件中<br> ​ master_host: 主库的 <strong>IP地址</strong><br> ​ master_user: 访问主库进行主从复制的 <strong>用户名</strong> ( 上面在主库创建的 )<br> ​ master_password: 访问主库进行主从复制的用户名对应的 <strong>密码</strong><br> ​ master_log_file: 从哪个 <strong>日志文件</strong> 开始同步 ( 即下图的 <strong>File</strong> )<br> ​ master_log_pos: 从指定日志文件的哪个 <strong>位置</strong> 开始同步 ( 即下图的 <strong>Position</strong> )（master_log_pos=0时系统会自动配成154）</p><p><img src="/learning-document-v3/assets/image-20221109160442025.7a193306.png" alt="image-20221109160442025"></p><p>主从同步是否就绪参数</p><p><img src="/learning-document-v3/assets/image-20221109170130617.110b3abf.png" alt="image-20221109170130617"></p><p>资料 <a href="https://blog.csdn.net/weixin_48319193/article/details/125453036" target="_blank" rel="noreferrer">https://blog.csdn.net/weixin_48319193/article/details/125453036</a></p><h4 id="_2、java读写分离" tabindex="-1">2、java读写分离 <a class="header-anchor" href="#_2、java读写分离" aria-label="Permalink to &quot;2、java读写分离&quot;">​</a></h4><p>sharding-jdbc：mysql-demo 写过了</p><p>replication 记得试下</p><h3 id="资料" tabindex="-1">资料 <a class="header-anchor" href="#资料" aria-label="Permalink to &quot;资料&quot;">​</a></h3><p><a href="https://juejin.cn/post/6844904191731695623" target="_blank" rel="noreferrer">https://juejin.cn/post/6844904191731695623</a></p><h2 id="分库分表" tabindex="-1">分库分表 <a class="header-anchor" href="#分库分表" aria-label="Permalink to &quot;分库分表&quot;">​</a></h2><h3 id="拆分之前考虑" tabindex="-1">拆分之前考虑 <a class="header-anchor" href="#拆分之前考虑" aria-label="Permalink to &quot;拆分之前考虑&quot;">​</a></h3><p>归档后数据数量</p><p>数据增长量 每月七八百万 类似这种需要拆分</p><p>分片数</p><p>考虑每个表的数据量、tps、qps等 压测取合适值</p><p>拆分键</p><p>hash取模计算位置</p><h3 id="拆分常用方法-数据分片" tabindex="-1">拆分常用方法(数据分片) <a class="header-anchor" href="#拆分常用方法-数据分片" aria-label="Permalink to &quot;拆分常用方法(数据分片)&quot;">​</a></h3><p>概念：按照一定规则，将数据集划分成相对独立数据子集<br> 核心手段：对关系型数据库进行分库和分表<br> 垂直分片（纵向拆分）：按功能拆分 order、user<br> 水平分片（横向拆分）：拆分成多个表或者库 order_1、order_2</p><h4 id="_1、取模-暴力法" tabindex="-1">1、取模-暴力法 <a class="header-anchor" href="#_1、取模-暴力法" aria-label="Permalink to &quot;1、取模-暴力法&quot;">​</a></h4><p>此方案采用前面推算出3年后约20亿用户量，进行取模轮流放置。<br> 好处：做法比较简单，数据分布均衡<br> 坏处：当数据量超过20亿的情况下，不易扩展。在数据量较小的情况下，资源有些浪费。</p><p>比如：<br> 预计两年后订单量5亿，分20个库，单库2500w<br> 采用取模 members % 20 <br> 主键采用雪花算法</p><h4 id="_2、hash方式" tabindex="-1">2、hash方式 <a class="header-anchor" href="#_2、hash方式" aria-label="Permalink to &quot;2、hash方式&quot;">​</a></h4><p>对数据进行hash计算再取模Hash(Key)%N，N一般是设备数<br> ​优缺：实现简单，但设备扩容大部分数据都需要迁移</p><h4 id="_3、一致性哈希-推荐" tabindex="-1">3、一致性哈希(推荐) <a class="header-anchor" href="#_3、一致性哈希-推荐" aria-label="Permalink to &quot;3、一致性哈希(推荐)&quot;">​</a></h4><p>此方案采用一致性哈希算法，定义一个2^32次方个桶的空间，约等于42亿的数据量。<br> ​介绍: <a href="https://blog.csdn.net/u011305680/article/details/79721030" target="_blank" rel="noreferrer">https://blog.csdn.net/u011305680/article/details/79721030</a></p><p>好处：数据量可以无上限，数据分布均衡，在扩展库数量时，仅少量数据迁移。<br> 坏处：实现上较复杂，dba操作麻烦</p><p>问题：hash冲突怎么处理？？</p><p>实现：测试代码搜这个ConsistentHashingWithoutVirtualNode</p><p>原理：<br> ​ 数据按照特征值和节点映射到首尾相接的hash环，数据顺时针找第一个节点作为存储节点<br> ​ 优缺：设备扩容只影响hash环相邻的节点，不需要大规模数据迁移</p><p><img src="/learning-document-v3/assets/59c9bdd24127251350617d69a4e9461d.a3a33382.png" alt="img"></p><h4 id="_4、区间划分-推荐" tabindex="-1">4、区间划分(推荐) <a class="header-anchor" href="#_4、区间划分-推荐" aria-label="Permalink to &quot;4、区间划分(推荐)&quot;">​</a></h4><p>时间：从memberId中取出时间戳，按时间缀划分区间，memberId中不从在时间戳的（导入的老数据），按数值区间划分。<br> 好处：无限扩展，无须迁移数据<br> 坏处：数据不均衡</p><p>后两位字母：比喻取memberId后两位进行划分。<br> 好处：数据分布相对均衡<br> 坏处：扩展时，有部分数据迁移</p><p>​ 根据具体业务，按时间戳、使用频率、Id范围等等分</p><p>​ 优缺：不是很好把握数据分布均匀</p><p>评估：<br> ​ 动态扩展，数据增长增加节点是否方便<br> ​ 负载均衡，数据分布是否均衡<br> ​ 可用性，节点故障，数据能否转移到其他节点</p><h4 id="_5、云产品-tdsql、drds-超级推荐" tabindex="-1">5、云产品：TDSQL、DRDS(超级推荐) <a class="header-anchor" href="#_5、云产品-tdsql、drds-超级推荐" aria-label="Permalink to &quot;5、云产品：TDSQL、DRDS(超级推荐)&quot;">​</a></h4><p>​ 好处：无风险、改造少、稳定、好扩展、价格与自建相差不多<br> ​ 云产品2分片：3500/月<br> ​ 自建配置：</p><p>费用：1900 + 800*3 预计= 4000/月</p><p><img src="/learning-document-v3/assets/image-20230706141602473.04c47c96.png" alt="image-20230706141602473"></p><h3 id="分库分表需要解决的问题" tabindex="-1">分库分表需要解决的问题！！！ <a class="header-anchor" href="#分库分表需要解决的问题" aria-label="Permalink to &quot;分库分表需要解决的问题！！！&quot;">​</a></h3><h4 id="_1、分布式事务" tabindex="-1">1、分布式事务??? <a class="header-anchor" href="#_1、分布式事务" aria-label="Permalink to &quot;1、分布式事务???&quot;">​</a></h4><p>补偿事务，例如TCC</p><p>记录日志</p><h4 id="_2、分布式主键冲突" tabindex="-1">2、分布式主键冲突 <a class="header-anchor" href="#_2、分布式主键冲突" aria-label="Permalink to &quot;2、分布式主键冲突&quot;">​</a></h4><p>① 用redis的incr命令生成主键</p><p>② 用UUID生成主键</p><p>③ 用snowake算法生成主键</p><h4 id="_3、跨库join" tabindex="-1">3、跨库join <a class="header-anchor" href="#_3、跨库join" aria-label="Permalink to &quot;3、跨库join&quot;">​</a></h4><p>尽量避免</p><p>门店</p><p>商品</p><p>会员 有按memberId分10个库</p><p>订单 全家是三个月前归档，历史库</p><p>券码 有按券号分库？？</p><p>支付 有集群</p><h3 id="故障转移" tabindex="-1">故障转移？？ <a class="header-anchor" href="#故障转移" aria-label="Permalink to &quot;故障转移？？&quot;">​</a></h3><p>MHA (Master High Availability) mysql高可用程序</p><p>资料 <a href="https://zhuanlan.zhihu.com/p/396007930" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/396007930</a></p><h3 id="数据迁移" tabindex="-1">数据迁移 <a class="header-anchor" href="#数据迁移" aria-label="Permalink to &quot;数据迁移&quot;">​</a></h3><p>配置<br> 两种：一种默认第一个是master，后面的是slave;二种是指定多个master(type区分)<br> 例子<br> spring.datasource.url=jdbc:mysql:replication://10.53.10.7:6630,10.53.10.22:6630,10.53.10.18:6630/fm_mg_user?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8</p><p>基于replication实现读写分离转至元数据结尾</p><p>数据源配置使用replication</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">jdbc:mysql:replication:</span><span style="color:#89DDFF;">//</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">53</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">3306</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">53</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">3306</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">console_product?…</span></span></code></pre></div><p>第一个为主库，后面为从库<br> 需要使用@Transactional(readonly=true) 控制为只读事务，则会走从库</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">public interface BasisStoreConfigMapper {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;">只读，走从库</span></span>
<span class="line"><span style="color:#A6ACCD;">    @Transactional(</span><span style="color:#F78C6C;">readOnly</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> true)</span></span>
<span class="line"><span style="color:#A6ACCD;">    List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">BasisStoreConfigDto</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> list(@Param(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">partnerId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) String partnerId);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;">没有加事务标记，则会走主库</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Integer</span><span style="color:#A6ACCD;"> batchUpdate(@Param(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">list</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">BasisStoreConfig</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> list);</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p>mycat??</p><h2 id="八、分区表" tabindex="-1">八、分区表 <a class="header-anchor" href="#八、分区表" aria-label="Permalink to &quot;八、分区表&quot;">​</a></h2><p>一张表，物理层面分区</p><p>分区特性可以将一张表从物理层面根据一定的规则将数据划分为多个分区，多个分区可以单独管理，甚至存放在不同的磁盘/文件系统上，提升效率。</p><h2 id="底层原理" tabindex="-1">底层原理 <a class="header-anchor" href="#底层原理" aria-label="Permalink to &quot;底层原理&quot;">​</a></h2><h3 id="结构图" tabindex="-1">结构图 <a class="header-anchor" href="#结构图" aria-label="Permalink to &quot;结构图&quot;">​</a></h3><p><img src="/learning-document-v3/assets/ab8bb15dc18e40d4b57a13f2d411930f.1c292356.png" alt="在这里插入图片描述"></p><p><img src="/learning-document-v3/assets/image-20230706152747395.ea69fca0.png" alt="image-20230706152747395"></p><p>![image-20230706145636248](mysql.assets/image-20230706145636248.png</p><p><img src="/learning-document-v3/assets/image-20230706152901368.28865829.png" alt="image-20230706152901368"></p><p>连接器<br> ​ 负责跟客户端建立连接，获取权限，维持和管理连接<br> ​ 用户密码验证、查询权限信息、分配对应的权限<br> ​ 太长时间没动静，会自动断开，用wait_timeout控制，默认8小时<br> 连接分为两类：长连接（ 推荐使用，但是要周期性断开长连接）、短连接 <br> 词法分析：mysql会对输入的字符串识别每部分代表什么意思 表名 id名一类的<br> 语法分析：根据语法规则判断sql是否满足语法规则、优化使用索引 表连接顺序等</p><h3 id="存储引擎" tabindex="-1">存储引擎 <a class="header-anchor" href="#存储引擎" aria-label="Permalink to &quot;存储引擎&quot;">​</a></h3><p>mysql存储引擎</p><p><strong>InnoDB</strong></p><p>（1）灾难恢复性比较好；</p><p>（2）<strong>支持事务</strong>。默认的事务隔离级别为可重复度，通过MVCC（并发版本控制）来实现的。</p><p>（3）使用的锁粒度为<strong>行级锁</strong>，可以支持更高的并发；</p><p>（4）支持<strong>外键</strong>；</p><p>（5）配合一些热备工具可以支持在线热备份；</p><p>（6）在InnoDB中存在着缓冲管理，通过缓冲池，将索引和数据全部缓存起来，加快查询的速度；</p><p>（7）对于InnoDB类型的表，其数据的物理组织形式是聚簇表。所有的数据按照主键来组织。数据和索引放在一块，都位于B+数的叶子节点上；</p><p><strong>MyISAM</strong></p><p>在5.5版本之前，MyISAM是MySQL的默认存储引擎，该存储引擎并发性差，不支持事务，所以使用场景比较少，主要特点为：</p><p>（1）<strong>不支持事务</strong>；</p><p>（2）<strong>不支持外键</strong>，如果强行增加外键，不会提示错误，只是外键不其作用；</p><p>（3）对数据的查询缓存只会缓存索引，不会像InnoDB一样缓存数据，而且是利用操作系统本身的缓存；</p><p>（4）默认的锁粒度为表级锁，所以并发度很差，加锁快，锁冲突较少，所以不太容易发生死锁；</p><p>（5）支持全文索引（MySQL5.6之后，InnoDB存储引擎也对全文索引做了支持），但是MySQL的全文索引基本不会使用，对于全文索引，现在有其他成熟的解决方案，比如：ElasticSearch，Solr，Sphinx等。</p><p>（6）数据库所在主机如果宕机，MyISAM的数据文件容易损坏，而且难恢复；</p><p>二、InnoDB和MyISAM的对比</p><p>1、由于锁粒度的不同，InnoDB比MyISAM支持更高的并发；</p><p>2、InnoDB为行级锁，MyISAM为表级锁，所以InnoDB相对于MyISAM来说，更容易发生死锁，锁冲突的概率更大，而且上锁的开销也更大，因为需要为每一行加锁；</p><p>3、在备份容灾上，InnoDB支持在线热备，有很成熟的在线热备解决方案；</p><p>4、查询性能上，MyISAM的查询效率高于InnoDB，因为InnoDB在查询过程中，是需要维护数据缓存，而且查询过程是先定位到行所在的数据块，然后在从数据块中定位到要查找的行；而MyISAM可以直接定位到数据所在的内存地址，可以直接找到数据；</p><p>5、SELECT COUNT(*)语句，如果行数在千万级别以上，MyISAM可以快速查出，而InnoDB查询的特别慢，因为MyISAM将行数单独存储了，而InnoDB需要朱行去统计行数；所以如果使用InnoDB，而且需要查询行数，则需要对行数进行特殊处理，如：离线查询并缓存；</p><p>6、MyISAM的表结构文件包括：.frm(表结构定义),.MYI(索引),.MYD(数据)；而InnoDB的表数据文件为:.ibd和.frm(表结构定义)；</p><p><strong>InnoDB适合增删改 MyISAM适合查询？？</strong></p><p>myisam引擎是5.1版本之前的默认引擎，支持全文检索、压缩、空间函数等，但是不支持事务和行级锁，所以一般用于有大量查询少量插入的场景来使用，而且myisam不支持外键，并且索引和数据是分开存储的。</p><p>innodb是基于聚簇索引建立的，和myisam相反它支持事务、外键，并且通过MVCC来支持高并发，索引和数据存储在一起</p><p><strong>Memory</strong></p><p>InnoDB:支持事务处理，支持外键，支持崩溃修复能力和并发控制。如果需要对事务的完整 性要求比较高(比如银行)，要求实现并发控制(比如售票)，那选择 InnoDB 有很大的优势。 如果需要频繁的更新、删除操作的数据库，也可以选择 InnoDB，因为支持事务的提交(commit) 和回滚(rollback)。</p><p>MyISAM:插入数据快，空间和内存使用比较低。如果表主要是用于插入新记录和读出记录，那么选择 MyISAM 能实现处理高效率。如果应用的完整性、并发性要求比较低，也可以使 用。</p><p>MEMORY:所有的数据都在内存中，数据的处理速度快，但是安全性不高。如果需要很快的 读写速度，对数据的安全性要求较低，可以选择 MEMOEY。它对表的大小有要求，不能建 立太大的表。所以，这类数据库只使用在相对较小的数据库表。</p><p>redo日志(innodb存储引擎日志文件)<br> 修改数据时，innodb记录到redo log中，更新内存，然后合适的时候操作到磁盘<br> Redo log是固定大小，循环写的过程<br> 可以保证数据库异常重启，之前的记录也不会丢失（crash-safe）</p><h3 id="innodb存储结构" tabindex="-1">innodb存储结构 <a class="header-anchor" href="#innodb存储结构" aria-label="Permalink to &quot;innodb存储结构&quot;">​</a></h3><p><img src="/learning-document-v3/assets/image-20230706145934041.c4f8555b.png" alt="image-20230706145934041"></p><p><img src="/learning-document-v3/assets/image-20230706145953164.6e3ae419.png" alt="image-20230706145953164"></p><h3 id="行结构" tabindex="-1">行结构 <a class="header-anchor" href="#行结构" aria-label="Permalink to &quot;行结构&quot;">​</a></h3><p><img src="/learning-document-v3/assets/image-20230706150036358.2ed364e4.png" alt="image-20230706150036358"></p><h3 id="一级索引" tabindex="-1">一级索引 <a class="header-anchor" href="#一级索引" aria-label="Permalink to &quot;一级索引&quot;">​</a></h3><p><img src="/learning-document-v3/assets/image-20230706150126833.ebeaa584.png" alt="image-20230706150126833"></p><h3 id="二级索引" tabindex="-1">二级索引 <a class="header-anchor" href="#二级索引" aria-label="Permalink to &quot;二级索引&quot;">​</a></h3><p><img src="/learning-document-v3/assets/image-20230706150205702.84121ea8.png" alt="image-20230706150205702"></p><h3 id="组合索引" tabindex="-1">组合索引 <a class="header-anchor" href="#组合索引" aria-label="Permalink to &quot;组合索引&quot;">​</a></h3><p><img src="/learning-document-v3/assets/image-20230706150234163.62b7bc2c.png" alt="image-20230706150234163"></p><p>选择离散性高的字段建立索引</p><p>组合索引：离散性高的字段放前面</p><p>前缀索引：varchar字段可以指定索引长度</p><p>离散性计算：count(distinct left(列名, 索引长度))/count(*)</p><p>SELECT count( DISTINCT ( thirdPartyCode ) ) / count( * ) thirdPartyCode, count( DISTINCT ( unionId ) ) / count( * ) unionId FROM customer_center0.member_channel;</p><p>SELECT count( DISTINCT LEFT ( receiveName, 3 ) ) / count( * ) AS l3, count( DISTINCT LEFT ( receiveName, 4 ) ) / count( * ) AS l4, count( DISTINCT LEFT ( receiveName, 5 ) ) / count( * ) AS l5, count( DISTINCT LEFT ( receiveName, 6 ) ) / count( * ) AS l6, count( DISTINCT LEFT ( receiveName, 7 ) ) / count( * ) AS l7, count( DISTINCT LEFT ( receiveName, 8 ) ) / count( * ) AS l8, count( DISTINCT LEFT ( receiveName, 9 ) ) / count( * ) AS l9, count( DISTINCT LEFT ( receiveName, 10 ) ) / count( * ) AS l10, count( DISTINCT LEFT ( receiveName, 11 ) ) / count( * ) AS l11, count( DISTINCT LEFT ( receiveName, 12 ) ) / count( * ) AS l12 FROM customer_center.delivery_address;</p><h3 id="索引覆盖" tabindex="-1">索引覆盖 <a class="header-anchor" href="#索引覆盖" aria-label="Permalink to &quot;索引覆盖&quot;">​</a></h3><p>in的参数个数建议小于200200以内使用index dive，超过200使用index statistics（不准确）</p><h3 id="工具" tabindex="-1">工具 <a class="header-anchor" href="#工具" aria-label="Permalink to &quot;工具&quot;">​</a></h3><p>slow log</p><p>sql审计 腾讯云、druid</p><h3 id="sql执行过程" tabindex="-1">sql执行过程 <a class="header-anchor" href="#sql执行过程" aria-label="Permalink to &quot;sql执行过程&quot;">​</a></h3><p><img src="/learning-document-v3/assets/image-20230706151735472.9cbfe1fa.png" alt="image-20230706151735472"></p><p>druid连接池问题</p><p>test-on-borrow=true获取连接时执行validationQuery检测连接是否有效，这个配置会降低性能。</p><h2 id="常见问题-1" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题-1" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="字符集😂" tabindex="-1">字符集😂 <a class="header-anchor" href="#字符集😂" aria-label="Permalink to &quot;字符集😂&quot;">​</a></h3><p>​ mysql 中的utf8 是阉割版的 utf8，它最多只用 3 个字节存储字符，所以存储不了表情，完整的 utf8 字符集，最多可以用 4 个字节来存储字符，这个字符集名字叫 utf8mb4</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> operate_log </span><span style="color:#F78C6C;">MODIFY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">op_info</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">text</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> utf8mb4  COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">修改后的信息</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><p>资料 <a href="https://oitboy.com/detail?id=21" target="_blank" rel="noreferrer">https://oitboy.com/detail?id=21</a></p><h3 id="行转列-列转行" tabindex="-1">行转列 列转行 <a class="header-anchor" href="#行转列-列转行" aria-label="Permalink to &quot;行转列 列转行&quot;">​</a></h3><p><a href="https://www.cnblogs.com/xiaoxi/p/7151433.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/xiaoxi/p/7151433.html</a></p><p>1、<strong>mysql比较低得版本，受毫秒影响，保存到数据库datetime的时间不准</strong></p><p>java date类型要清除掉毫秒部分</p><p>calendar.clear(Calendar.MILLISECOND);</p><p>否则保存到数据库会四舍五入导致时间不准</p><p>2、查询缓存缺点</p><p>一、查询缓存失效比较频繁，只要表更新，缓存就会清空</p><p>二、缓存对应新更新的数据命中率比较低</p><p>版本</p><p>com.mysql.jdbc.Driver 是 mysql-connector-java 5中的，</p><p>com.mysql.cj.jdbc.Driver 是 mysql-connector-java 6中的</p><p>mysql5.7以下版本兼容bug</p><p><a href="https://hacpai.com/article/1594267824908" target="_blank" rel="noreferrer">https://hacpai.com/article/1594267824908</a></p><p>any_value sql_mode=only_full_group_by</p><p>订单分库分片算法</p><p><img src="/learning-document-v3/assets/订单分库分片算法20201126.64fdad85.png" alt="订单分库分片算法20201126"></p><h2 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h2><h3 id="性能瓶颈" tabindex="-1">性能瓶颈 <a class="header-anchor" href="#性能瓶颈" aria-label="Permalink to &quot;性能瓶颈&quot;">​</a></h3><h4 id="_1、数据库连接" tabindex="-1">1、数据库连接 <a class="header-anchor" href="#_1、数据库连接" aria-label="Permalink to &quot;1、数据库连接&quot;">​</a></h4><p>​ mysql默认100个连接，单机1500连接</p><h4 id="_2、数据量" tabindex="-1">2、数据量 <a class="header-anchor" href="#_2、数据量" aria-label="Permalink to &quot;2、数据量&quot;">​</a></h4><p>​ 单库数据量5000万以内性能较好 ​ 单表数据量500万-1000万之间性能较好</p><h4 id="_3、硬件问题" tabindex="-1">3、硬件问题 <a class="header-anchor" href="#_3、硬件问题" aria-label="Permalink to &quot;3、硬件问题&quot;">​</a></h4><p>​ 服务磁盘空间有限制，并发压力下所有请求访问同一个节点，会对磁盘IO影响很大</p><h3 id="优化" tabindex="-1">优化 <a class="header-anchor" href="#优化" aria-label="Permalink to &quot;优化&quot;">​</a></h3><p>1、参数优化 2、缓存、索引 3、读写分离 4、分库分表</p><p>优化成本：硬件&gt;系统配置&gt;数据库表结构&gt;SQL及索引。 优化效果：硬件&lt;系统配置&lt;数据库表结构&lt;SQL及索引。</p><p>创建列abc索引，语句like c% 会导致索引失效，like abc% 才有效 文档：</p><p><a href="http://blog.itpub.net/31555484/viewspace-2565387/" target="_blank" rel="noreferrer">http://blog.itpub.net/31555484/viewspace-2565387/</a></p><p><a href="https://juejin.cn/post/7151548964964139021" target="_blank" rel="noreferrer">https://juejin.cn/post/7151548964964139021</a></p><ul><li>优化的原因</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1、经常会出现慢sql</span></span>
<span class="line"><span style="color:#A6ACCD;">2、数据库连接超时</span></span>
<span class="line"><span style="color:#A6ACCD;">3、由于表锁等原因 数据无法提交 造成生产事故</span></span></code></pre></div><ul><li>从哪几个方面操刀呢</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1、sql自身 （索引，有效）</span></span>
<span class="line"><span style="color:#A6ACCD;">2、数据库表结构</span></span>
<span class="line"><span style="color:#A6ACCD;">3、系统配置</span></span>
<span class="line"><span style="color:#A6ACCD;">4、硬件</span></span></code></pre></div><ul><li>数据准备</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">下载：http://dev.mysql.com/doc/sakila/en/sakila-installation.html</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">导入数据：http://dev.mysql.com/doc/index-other.html</span></span></code></pre></div><ul><li><p>如何发现有问题的sql</p><ul><li>查看时否开启慢查询日志</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show variables </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">slow_query_log</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>是否将位使用索引的sql记录慢sql中</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show variables </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%log%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>开启</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">global</span><span style="color:#A6ACCD;"> slow_query_log</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">global</span><span style="color:#A6ACCD;"> log_queries_not_using_indexes</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">on</span></span></code></pre></div><ul><li>记录慢查询的时间</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show variables </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">long_query_time</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">global</span><span style="color:#A6ACCD;"> long_query_time</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>设置慢sql写入文件位置</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">global</span><span style="color:#A6ACCD;"> slow_query_log_file</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">D:\dev mysql\data\slow_query.log</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div></li><li><p>分析慢sql查询工具</p><ul><li>tp-query-digest</li><li><a href="https://blog.csdn.net/banche163/article/details/103847851" target="_blank" rel="noreferrer">安装路径</a> 的链接。</li></ul></li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">、tp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">digest</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">、分析慢sql</span></span>
<span class="line"><span style="color:#A6ACCD;">perl pt</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">digest.pl </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">D:\dev\mysql\data\SH-BW-H-NB-slow.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">、将分析结果输出到文档</span></span>
<span class="line"><span style="color:#A6ACCD;">perl pt</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">digest.pl </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">D:\dev\mysql\data\SH-BW-H-NB-slow.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> slow_report.log</span></span>
<span class="line"><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">、分析最近12小时的慢sql</span></span>
<span class="line"><span style="color:#A6ACCD;">perl pt</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">digest</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">--since=12h  &quot;D:\dev\mysql\data\SH-BW-H-NB-slow.log&quot; &gt; slow_report2.log</span></span>
<span class="line"><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">、指定分析一段时间内的慢sql</span></span>
<span class="line"><span style="color:#A6ACCD;">  perl pt</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">digest.pl </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">D:\dev\mysql\data\SH-BW-H-NB-slow.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">--since &quot;2020-03-08 09:30:00&quot; --until &quot;2020-03-08 09:59:00&quot; &gt; slow_report3.log</span></span></code></pre></div><ul><li><p>分析工具的参数介绍</p><ul><li><p>第一部分：总体统计结果</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">、说明：</span></span>
<span class="line"><span style="color:#A6ACCD;">     Overall：总共有多少条查询</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#C792EA;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">range</span><span style="color:#A6ACCD;">：查询执行的时间范围</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">：唯一查询数量，即对查询条件进行参数化以后，总共有多少个不同的查询</span></span>
<span class="line"><span style="color:#A6ACCD;">     total：总计   min：最小   max：最大  avg：平均</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">95</span><span style="color:#A6ACCD;">%：把所有值从小到大排列，位置位于95%的那个数，这个数一般最具有参考价值</span></span>
<span class="line"><span style="color:#A6ACCD;">     median：中位数，把所有值从小到大排列，位置位于中间那个数</span></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">、具体参数</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 该工具执行日志分析的用户时间，系统时间，物理内存占用大小，虚拟内存占用大小</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 340ms user </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;">, 140ms </span><span style="color:#F78C6C;">system</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">23</span><span style="color:#A6ACCD;">.99M rss, </span><span style="color:#F78C6C;">203</span><span style="color:#A6ACCD;">.11M vsz</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 工具执行时间</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Current </span><span style="color:#C792EA;">date</span><span style="color:#A6ACCD;">: Fri Nov </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">02</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">37</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2016</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 运行分析工具的主机名</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Hostname: localhost.localdomain</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 被分析的文件名</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Files: slow.log</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 语句总数量，唯一的语句数量，QPS，并发数</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Overall: </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> total, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">01</span><span style="color:#A6ACCD;"> QPS, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.01x concurrency ________________</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 日志记录的时间范围</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#C792EA;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">range</span><span style="color:#A6ACCD;">: </span><span style="color:#F78C6C;">2016</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">11</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">22</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">06</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">06</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">06</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">40</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 属性               总计      最小    最大    平均    </span><span style="color:#F78C6C;">95</span><span style="color:#A6ACCD;">%  标准    中等</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Attribute          total     min     max     avg     </span><span style="color:#F78C6C;">95</span><span style="color:#A6ACCD;">%  stddev  median</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#89DDFF;">============</span><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 语句执行时间</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">Exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;">             3s   640ms      2s      1s      2s   999ms      1s</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 锁占用时间</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Lock </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;">            1ms       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">     1ms   723us     1ms     1ms   723us</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 发送到客户端的行数</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">Rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">sent</span><span style="color:#A6ACCD;">              </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">50</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># select语句扫描行数</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">Rows</span><span style="color:#A6ACCD;"> examine     </span><span style="color:#F78C6C;">186</span><span style="color:#A6ACCD;">.17k       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">186</span><span style="color:#A6ACCD;">.17k  </span><span style="color:#F78C6C;">93</span><span style="color:#A6ACCD;">.09k </span><span style="color:#F78C6C;">186</span><span style="color:#A6ACCD;">.17k </span><span style="color:#F78C6C;">131</span><span style="color:#A6ACCD;">.64k  </span><span style="color:#F78C6C;">93</span><span style="color:#A6ACCD;">.09k</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 查询的字符数</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Query size           </span><span style="color:#F78C6C;">455</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">15</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">440</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">227</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">440</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">300</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">52</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">227</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">50</span></span></code></pre></div></li><li><p>第二部分: 查询分组统计结果 默认按响应时间降序</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">、说明</span></span>
<span class="line"><span style="color:#A6ACCD;">      Rank：所有语句的排名，默认按查询时间降序排列，通过</span><span style="color:#676E95;font-style:italic;">--order-by指定</span></span>
<span class="line"><span style="color:#A6ACCD;">      Query ID：语句的ID，（去掉多余空格和文本字符，计算hash值）</span></span>
<span class="line"><span style="color:#A6ACCD;">      Response：总的响应时间</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;">：该查询在本次分析中总的时间占比</span></span>
<span class="line"><span style="color:#A6ACCD;">      calls：执行次数，即本次分析总共有多少条这种类型的查询语句</span></span>
<span class="line"><span style="color:#A6ACCD;">      R</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">Call</span><span style="color:#A6ACCD;">：平均每次执行的响应时间</span></span>
<span class="line"><span style="color:#A6ACCD;">      V</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">M：响应时间Variance</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">to</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">mean的比率</span></span>
<span class="line"><span style="color:#A6ACCD;">      Item：查询对象</span></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">、具体参数</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">Profile</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Rank Query ID                            Response </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;"> Calls R</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">Call</span><span style="color:#A6ACCD;"> V</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">M </span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#89DDFF;">====</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">===================================</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=============</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=====</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">====</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> 0xE77769C62EF669AA7DD5F6760F2D2EBB   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0028</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">38</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">%     </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0028</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> SHOW VARIABLES</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> 0xCD7FE690D641EFD65711E90D12B02134   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0026</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">36</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">%     </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0026</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> customer</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> 0x751417D45B8E80EE5CBA2034458B5BC9   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0006</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">%     </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0006</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> SHOW DATABASES</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> 0x803984638D651F405C13F591095F7AB8   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0006</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">%     </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0006</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> film</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> 0x898255B1BE4F8C3044AE35A182869033   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0004</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">%     </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0002</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADMIN</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INIT</span><span style="color:#A6ACCD;"> DB</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># MISC 0xMISC                               </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0003</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">%     </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0001</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> ITEMS</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div></li><li><p>第三部分:每一种查询的详细统计结果</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">、说明</span></span>
<span class="line"><span style="color:#A6ACCD;">      由下面查询的详细统计结果，最上面的表格列出了执行次数、最大、最小、平均、</span><span style="color:#F78C6C;">95</span><span style="color:#A6ACCD;">%等各项目的统计。</span></span>
<span class="line"><span style="color:#A6ACCD;">      ID：查询的ID号，和上图的Query ID对应</span></span>
<span class="line"><span style="color:#A6ACCD;">      Databases：数据库名</span></span>
<span class="line"><span style="color:#A6ACCD;">      Users：各个用户执行的次数（占比）</span></span>
<span class="line"><span style="color:#A6ACCD;">      Query_time </span><span style="color:#F78C6C;">distribution</span><span style="color:#A6ACCD;"> ：查询时间分布, 长短体现区间占比。</span></span>
<span class="line"><span style="color:#A6ACCD;">      Explain：SQL语句</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">、具体示例</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Query </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">: </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> QPS, 0x concurrency, ID 0xCD7FE690D641EFD65711E90D12B02134 </span><span style="color:#F78C6C;">at</span><span style="color:#A6ACCD;"> byte </span><span style="color:#F78C6C;">1836</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Scores: V</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">M </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#C792EA;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">range</span><span style="color:#A6ACCD;">: all events occurred </span><span style="color:#F78C6C;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2021</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">03</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">08T15:</span><span style="color:#F78C6C;">53</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">49</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Attribute    pct   total     min     max     avg     </span><span style="color:#F78C6C;">95</span><span style="color:#A6ACCD;">%  stddev  median</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#89DDFF;">============</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=======</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Count         </span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">Exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">36</span><span style="color:#A6ACCD;">     3ms     3ms     3ms     3ms     3ms       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">     3ms</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Lock </span><span style="color:#C792EA;">time</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">77</span><span style="color:#A6ACCD;">     2ms     2ms     2ms     2ms     2ms       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">     2ms</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">Rows</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">sent</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">Rows</span><span style="color:#A6ACCD;"> examine  </span><span style="color:#F78C6C;">36</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">599</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">599</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">599</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">599</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">599</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">599</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Query size     </span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">48</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># String:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Databases    sakila</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Hosts        localhost</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Users        </span><span style="color:#F78C6C;">root</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Query_time </span><span style="color:#F78C6C;">distribution</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#   1us</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#  10us</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 100us</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#   1ms  ################################################################</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#  10ms</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># 100ms</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    1s</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#  10s</span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># Tables</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    SHOW </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">STATUS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">sakila</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">customer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">\G</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;">#    SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">sakila</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">customer</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">\G</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#A6ACCD;"># EXPLAIN </span><span style="color:#676E95;font-style:italic;">/*!50100 PARTITIONS*/</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> customer </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> first_name </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">LINDA</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">\G</span></span></code></pre></div></li></ul></li><li><p>那些sql 需要优化</p><ul><li>查询次数多且每次查询占用时间长的SQL(digest分析的前几个查询);</li><li>IO大的sql 扫秒行数较多Rows examine 项</li><li>未命中索引 digest分析中Row examine 和 Rows Send的对比</li></ul></li><li><p>熟悉下Explian</p><p>主要关注 key、type possile_keys、rows、extra</p><ul><li><p>key</p><ul><li>system 表只有一行记录，这个是const的特例，一般不会出现，可以忽略</li><li>const 表示通过索引一次就找到了，const用于比较primary key或者unique索引。因为只匹配一行数据，所以很快</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">explain </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;">  user_test </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>eq_ref 使用唯一索引或主键进行匹配，用于联接操作时，确保联接条件是唯一的。性能较好，直接定位所需行。</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">EXPLAIN </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> actor a </span><span style="color:#F78C6C;">LEFT JOIN</span><span style="color:#A6ACCD;"> film_actor fa </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> a.actor_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fa.actor_id </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> fa.film_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>ref 非唯一索引，等值匹配，可能有多行命中</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">## 去掉主键索引</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> user_test </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">## 换成普通索引</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> user_test </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> idx_id(id);</span></span>
<span class="line"><span style="color:#A6ACCD;">## </span><span style="color:#F78C6C;">sql</span></span>
<span class="line"><span style="color:#A6ACCD;">explain </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;">  user_test </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>range ，它是索引上的范围查询，它会在索引上扫码特定范围内的值。</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">## 给时间加上索引</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> payment </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> idx_payment_data (payment_date);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">## </span><span style="color:#F78C6C;">sql</span></span>
<span class="line"><span style="color:#A6ACCD;">EXPLAIN </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> payment </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;">   payment_date </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2005-05-12</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ANd</span><span style="color:#A6ACCD;"> payment_date </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2005-06-18</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>index 索引上的全集扫描，例如：InnoDB 的 count</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> payment</span></span></code></pre></div><ul><li>all 全表扫描 效率最差的</li></ul></li><li><p>possible_leys 线上可用在这张表上的索引</p></li><li><p>rows 扫描行数</p></li><li><p>extra</p><ul><li>Using filesort：MySQL 对数据使用一个外部的文件内容进行了排序，而不是按照表内的索引进行排序读取。</li><li>Using temporary：使用临时表保存中间结果，也就是说 MySQL 在对查询结果排序时使用了临时表，常见于order by 或 group by。</li><li>Using index：表示 SQL 操作中使用了覆盖索引（Covering Index），避免了访问表的数据行，效率高。</li><li>Using index condition：表示 SQL 操作命中了索引，但不是所有的列数据都在索引树上，还需要访问实际的行记录。 5.6之前是没有的 主要运用了索引下推</li><li>补充 1、不使用索引下推： 获取下一行，首先读取索引信息，然后根据索引将整行数据读取出来。 然后通过where条件判断当前数据是否符合条件，符合返回数据。 2、 获取下一行的索引信息。 检查索引中存储的列信息是否符合索引条件，如果符合将整行数据读取出来，如果不符合跳过读取下一行。 用剩余的判断条件，判断此行数据是否符合要求，符合要求返回数据。</li></ul></li></ul></li><li><p>优化讲解</p><ul><li>组合索引顺序</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">## 组合索引一个优点 可以避免回表（进行索引覆盖） 减少回表查询次数一点避免过多的索引创建 </span></span>
<span class="line"><span style="color:#A6ACCD;">a, (a, b) 、(a,c) 、（a, b, c）  </span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;">  idx_ad_ph_city_id (</span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;">, phone, district);</span></span>
<span class="line"><span style="color:#A6ACCD;">## 补充 离散度大的列放到联合索引的前面 离散度大的列 可选择性</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;">), </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#A6ACCD;"> district), </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">DISTINCT</span><span style="color:#A6ACCD;"> phone) </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">## 配送实践  这里提现组合索引的好处</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> delivery </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> idx_partiner_id_create_date (partner_id, create_date);</span></span></code></pre></div><ul><li><p>grop by (a, b)</p><ul><li>a b 都是普通索引</li><li>a b 是组合索引</li><li>b a 互换</li><li>where 条件包含 索引</li></ul></li><li><p>order by</p><ul><li><p>值查询用于排序的索引字段</p></li><li><p>查询用于排序的索引字段和主键之外的字段</p></li><li><p>where + order by</p><ul><li>排序字段在多个索引中</li><li>排序字段在一个索引中,并且WHERE条件和ORDER BY使用相同的索引</li><li>where 条件字段和排序字段在一个索引中（组合索引）</li><li>排序字段顺序与索引列顺序不一致 （等值查询 和 范围查询）</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;">  idx_ct_ph(city_id, phone);</span></span>
<span class="line"><span style="color:#A6ACCD;">EXPLAIN </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> city_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> phone;</span></span>
<span class="line"><span style="color:#A6ACCD;">EXPLAIN </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> city_id </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> phone;</span></span></code></pre></div></li></ul></li><li><p>强制走索引</p></li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span></span>
<span class="line"><span style="color:#A6ACCD;">   delivery</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">FORCE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;">(idx_create_date)</span></span>
<span class="line"><span style="color:#F78C6C;">WHERE</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> partner_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1418</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> create_date </span><span style="color:#F78C6C;">BETWEEN</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2021-01-01 00:00:00</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2021-01-12 23:59:59</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">LIMIT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">44900</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">;</span></span></code></pre></div></li></ul><h2 id="mvcc" tabindex="-1">MVCC <a class="header-anchor" href="#mvcc" aria-label="Permalink to &quot;MVCC&quot;">​</a></h2><p>事务隔离级别的无锁实现方式，用于提高事务的并发性能</p><p>脏读是单条数据问题(两次读取过程中，该数据被修改)</p><p>幻读是表级别的问题(两次读取过程中，插入了一条数据)，需要表锁，也就是采用串行化方式解决</p><h3 id="隐藏列" tabindex="-1">隐藏列 <a class="header-anchor" href="#隐藏列" aria-label="Permalink to &quot;隐藏列&quot;">​</a></h3><p>DB_TRX_ID 当前列是被哪个事务ID维护了(比如当前如果执行的是插入就把插入用到的事务ID保存进来)<br> DB_ROLL_PTR 记录的是上一个事务操作的指针数据，便于回滚到上一个事务</p><p><img src="/learning-document-v3/assets/image1.4442f515.png" alt="image"></p><p>操作过的事务都会存在undolog里面 <img src="/learning-document-v3/assets/image2.2dea8dbb.png" alt="image"></p><p>每次查询都会创建一个readView <img src="/learning-document-v3/assets/image3.96264c4a.png" alt="image"></p><p>用undolog里面保存的各个历史数据事务ID和readView中的做对比，找到已经提交的最新的事务ID,然后读取里面的数据</p><p>这个对比的过程其实就是个乐观锁的机制</p><p><img src="/learning-document-v3/assets/image4.01367b60.png" alt="image"></p><p><img src="/learning-document-v3/assets/image5.5cbe6cfe.png" alt="image"></p><p>参考 <a href="https://www.bilibili.com/video/BV1Hr421p7EK/?spm_id_from=333.337.search-card.all.click&amp;vd_source=a6e6cf37c2f2d7febbd5dbafc3f13ba3" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV1Hr421p7EK/?spm_id_from=333.337.search-card.all.click&amp;vd_source=a6e6cf37c2f2d7febbd5dbafc3f13ba3</a></p><h2 id="面试题" tabindex="-1">面试题 <a class="header-anchor" href="#面试题" aria-label="Permalink to &quot;面试题&quot;">​</a></h2><p>MySql</p><p>164.数据库的三范式是什么？</p><p>165.一张自增表里面总共有 7 条数据，删除了最后 2 条数据，重启 mysql 数据库，又插入了一条数据，此时 id 是几？</p><p>166.如何获取当前数据库版本？</p><p>167.说一下 ACID 是什么？</p><p>168.char 和 varchar 的区别是什么？</p><p>169.float 和 double 的区别是什么？</p><p>170.mysql 的内连接、左连接、右连接有什么区别？</p><p>171.mysql 索引是怎么实现的？</p><p>172.怎么验证 mysql 的索引是否满足需求？</p><p>173.说一下数据库的事务隔离？</p><p>174.说一下 mysql 常用的引擎？</p><p>175.说一下 mysql 的行锁和表锁？</p><p>176.说一下乐观锁和悲观锁？</p><p>177.mysql 问题排查都有哪些手段？</p><p>178.如何做 mysql 的性能优化？</p><p>数据库索引类型</p><p>mysql存储引擎</p><p>InnoDB</p><p>MyISAM</p><p>Memory</p><h2 id="参考文档" tabindex="-1">参考文档 <a class="header-anchor" href="#参考文档" aria-label="Permalink to &quot;参考文档&quot;">​</a></h2><p><a href="https://mp.weixin.qq.com/s/fAT21N79gjeLDacbbyoKRw" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/fAT21N79gjeLDacbbyoKRw</a></p><p>分库分表 [为什么要分库分表（设计⾼并发系统的时候，数据库层⾯该如何设计）？⽤过哪些分库分表中间件？不 同的分库分表中间件都有什么优点和缺点？你们具体是如何对数据库如何进⾏垂直拆分或⽔平拆分的？] [现在有⼀个未分库分表的系统，未来要分库分表，如何设计才可以让系统从未分库分表动态切换到分库 分表上？] [如何设计可以动态扩容缩容的分库分表⽅案？] [分库分表之后，id 主键如何处理？] 读写分离 [如何实现 MySQL 的读写分离？MySQL 主从复制原理是啥？如何解决 MySQL 主从同步的延时问题？]</p><h2 id="工具-1" tabindex="-1">工具 <a class="header-anchor" href="#工具-1" aria-label="Permalink to &quot;工具&quot;">​</a></h2><h3 id="数据可视化模拟试图" tabindex="-1">数据可视化模拟试图 <a class="header-anchor" href="#数据可视化模拟试图" aria-label="Permalink to &quot;数据可视化模拟试图&quot;">​</a></h3><p><a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html" target="_blank" rel="noreferrer">https://www.cs.usfca.edu/~galles/visualization/Algorithms.html</a></p><h3 id="日志表结构工具" tabindex="-1">日志表结构工具 <a class="header-anchor" href="#日志表结构工具" aria-label="Permalink to &quot;日志表结构工具&quot;">​</a></h3><p><a href="https://dbdiagram.io/home" target="_blank" rel="noreferrer">https://dbdiagram.io/home</a></p><h2 id="版本问题" tabindex="-1">版本问题 <a class="header-anchor" href="#版本问题" aria-label="Permalink to &quot;版本问题&quot;">​</a></h2><p>mysql低版本 timestamp 不能保存超过2038-01-19 03:14:07<br> 因timestamp为4字节，因此最大值为 2147483647 （同int的最大值），换算为时间则为 2038-01-19 03:14:07（UTC时间），即北京时间2038-01-19 11:14:07<br> 而datetime为8个字节，存储时间可超过9999年，理论上足够用<br><a href="https://cloud.tencent.com/developer/article/2359246" target="_blank" rel="noreferrer">https://cloud.tencent.com/developer/article/2359246</a></p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-37656e44><!--[--><!--]--><div class="edit-info" data-v-37656e44><!----><div class="last-updated" data-v-37656e44><p class="VPLastUpdated" data-v-37656e44 data-v-149a99df>最近更新时间: <time datetime="2024-07-08T06:38:35.000Z" data-v-149a99df></time></p></div></div><nav class="prev-next" data-v-37656e44><div class="pager" data-v-37656e44><a class="pager-link prev" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86/knife4j" data-v-37656e44><span class="desc" data-v-37656e44>上一篇</span><span class="title" data-v-37656e44>knife4j</span></a></div><div class="pager" data-v-37656e44><a class="pager-link next" href="/learning-document-v3/data/%E5%90%8E%E7%AB%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/redis" data-v-37656e44><span class="desc" data-v-37656e44>下一篇</span><span class="title" data-v-37656e44>redis</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-255ec12d data-v-e03eb2e1><div class="container" data-v-e03eb2e1><p class="message" data-v-e03eb2e1>Released under the MIT License.</p><p class="copyright" data-v-e03eb2e1>Copyright © 2023-present Evan You</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"data_readme.md\":\"0d15970c\",\"data_前端_css.md\":\"65613d96\",\"data_link.md\":\"adcbe3e2\",\"data_前端_vscode.md\":\"fe3621b5\",\"data_前端_uniapp.md\":\"ffc07b50\",\"data_前端_typescript.md\":\"73320756\",\"data_前端_关于前端.md\":\"8e8abb7b\",\"data_前端_webpack.md\":\"46e07dbc\",\"data_后端_大数据_大数据.md\":\"7ae63bf8\",\"data_后端_微服务框架_注册中心_eureka.md\":\"8345346e\",\"data_后端_微服务框架_消息中间件_mqtt.md\":\"0b7fe73a\",\"data_前端_javascript.md\":\"bf617983\",\"data_后端_微服务框架_elasticsearch.md\":\"d41049d3\",\"data_后端_人工智能_人工智能.md\":\"81a886b2\",\"data_后端_微服务框架_定时任务_xxljob.md\":\"43823e74\",\"data_后端_微服务框架_注册中心_nacos.md\":\"fe00ad83\",\"data_后端_微服务框架_消息中间件_kafka.md\":\"6fe48cf9\",\"data_后端_微服务框架_消息中间件_消息中间件.md\":\"fb6b252a\",\"data_后端_微服务框架_配置中心_apollo.md\":\"5bc13fa2\",\"data_后端_接口管理_smart-doc.md\":\"ff371cc6\",\"data_后端_数据库_mongodb.md\":\"cb1e00ee\",\"data_后端_接口管理_knife4j.md\":\"54c7db37\",\"data_前端_vue.md\":\"da2e7025\",\"data_后端_微服务框架_消息中间件_rocketmq.md\":\"13145962\",\"data_后端_接口管理_swagger.md\":\"4f040808\",\"data_后端_接口管理_yapi.md\":\"8627c05f\",\"data_后端_数据库_数据库管理工具.md\":\"0e75a5d4\",\"data_后端_架构_操作系统.md\":\"1a02ee95\",\"data_后端_数据库_postgresql.md\":\"3da6474f\",\"data_后端_微服务框架_消息中间件_rabbitmq.md\":\"101e206a\",\"data_后端_架构_算法.md\":\"c2fb5e56\",\"data_后端_编程语言_go_go.md\":\"b602a754\",\"data_后端_架构_设计模式.md\":\"e25c9a41\",\"data_后端_数据库_mysql.md\":\"3212f226\",\"data_后端_架构_架构.md\":\"6020b180\",\"data_后端_数据库_redis.md\":\"f99a8612\",\"data_后端_编程语言_java_开发工具_ai.md\":\"d7052cbd\",\"data_后端_编程语言_java_orm.md\":\"c5081953\",\"data_后端_编程语言_java_开发工具_idea.md\":\"e0cf2456\",\"data_后端_编程语言_java_开发工具_包管理工具.md\":\"b4a04934\",\"data_后端_编程语言_python_python.md\":\"66cd4b22\",\"data_后端_部署_elk.md\":\"6c9609ff\",\"data_后端_编程语言_java_jdk.md\":\"33252ae0\",\"data_后端_部署_nginx.md\":\"ced7198e\",\"data_后端_编程语言_java_spring.md\":\"6a97a0ed\",\"data_后端_部署_docker.md\":\"332e2619\",\"data_后端_部署_kubernetes.md\":\"4ccdac23\",\"data_后端_部署_zookeeper.md\":\"beffeb88\",\"data_后端_部署_envoy.md\":\"5cdaf5ae\",\"data_后端_部署_tomcat.md\":\"3b05b928\",\"data_后端_部署_部署.md\":\"3f54d471\",\"data_后端_编程语言_java_java.md\":\"def9e515\",\"index.md\":\"262d0993\",\"data_工具_操作系统.md\":\"1e5bf189\",\"data_工具_markdown.md\":\"516f2050\",\"data_工具_建站.md\":\"ae00b8e8\",\"data_话术.md\":\"515a4cb0\",\"data_工具_工具.md\":\"92fc7735\",\"data_工具_代码管理_git.md\":\"9e42aabd\",\"data_后端_面试.md\":\"91fb47e3\",\"data_后端_面试题2024.md\":\"7672dd39\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"导航\",\"description\":\"个人博客\",\"base\":\"/learning-document-v3/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"\",\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"联系方式\",\"link\":\"/data/link\"}],\"sidebar\":{\"/data\":{\"base\":\"/data\",\"items\":[{\"text\":\"前端\",\"items\":[{\"text\":\"vue\",\"link\":\"/前端/vue/vue\"}]},{\"text\":\"后端\",\"items\":[{\"text\":\"架构\",\"link\":\"/后端/架构/架构\"}]},{\"text\":\"工具\",\"items\":[{\"text\":\"工具\",\"link\":\"/工具/工具\"}]}]},\"/data/前端\":{\"base\":\"/data/前端\",\"items\":[{\"text\":\"前端\",\"items\":[{\"text\":\"javascript\",\"link\":\"/javascript\"},{\"text\":\"typescript\",\"link\":\"/typescript\"},{\"text\":\"vue\",\"link\":\"/vue\"},{\"text\":\"uniapp\",\"link\":\"/uniapp\"},{\"text\":\"webpack\",\"link\":\"/webpack\"},{\"text\":\"vscode\",\"link\":\"/vscode\"},{\"text\":\"关于前端\",\"link\":\"/关于前端\"}]}]},\"/data/后端\":{\"base\":\"/data/后端\",\"items\":[{\"text\":\"架构\",\"items\":[{\"text\":\"架构设计\",\"link\":\"/架构/架构\"},{\"text\":\"算法逻辑\",\"link\":\"/架构/算法\"},{\"text\":\"设计模式\",\"link\":\"/架构/设计模式\"},{\"text\":\"操作系统\",\"link\":\"/架构/操作系统\"}],\"collapsed\":true},{\"text\":\"后端语言\",\"items\":[{\"text\":\"java\",\"link\":\"/编程语言/java/java\"},{\"text\":\"python\",\"link\":\"/编程语言/python/python\"},{\"text\":\"go\",\"link\":\"/编程语言/go/go\"}],\"collapsed\":true},{\"text\":\"微服务框架\",\"items\":[{\"text\":\"elasticsearch\",\"link\":\"/微服务框架/elasticsearch\"},{\"text\":\"配置中心\",\"base\":\"/data/后端/微服务框架\",\"items\":[{\"text\":\"apollo\",\"link\":\"/配置中心/apollo\"},{\"text\":\"nacos\",\"link\":\"/注册中心/nacos\"}]},{\"text\":\"注册中心\",\"base\":\"/data/后端/微服务框架\",\"items\":[{\"text\":\"eureka\",\"link\":\"/注册中心/eureka\"},{\"text\":\"nacos\",\"link\":\"/注册中心/nacos\"}]},{\"text\":\"消息中间件\",\"base\":\"/data/后端/微服务框架/消息中间件\",\"items\":[{\"text\":\"rabbitmq\",\"link\":\"/rabbitmq\"},{\"text\":\"rocketmq\",\"link\":\"/rocketmq\"},{\"text\":\"kafka\",\"link\":\"/kafka\"},{\"text\":\"mqtt\",\"link\":\"/mqtt\"}]},{\"text\":\"定时任务\",\"base\":\"/data/后端/微服务框架\",\"items\":[{\"text\":\"xxljob\",\"link\":\"/定时任务/xxljob\"}]}],\"collapsed\":true},{\"text\":\"部署\",\"items\":[{\"text\":\"部署\",\"link\":\"/部署/部署\"},{\"text\":\"tomcat\",\"link\":\"/部署/tomcat\"},{\"text\":\"nginx\",\"link\":\"/部署/nginx\"},{\"text\":\"docker\",\"link\":\"/部署/docker\"},{\"text\":\"elk\",\"link\":\"/部署/elk\"},{\"text\":\"kubernetes\",\"link\":\"/部署/kubernetes\"},{\"text\":\"zookeeper\",\"link\":\"/部署/zookeeper\"}],\"collapsed\":true},{\"text\":\"接口管理\",\"items\":[{\"text\":\"swagger\",\"link\":\"/接口管理/swagger\"},{\"text\":\"smart-doc\",\"link\":\"/接口管理/smart-doc\"},{\"text\":\"yapi\",\"link\":\"/接口管理/yapi\"},{\"text\":\"knife4j\",\"link\":\"/接口管理/knife4j\"}],\"collapsed\":true},{\"text\":\"数据库\",\"items\":[{\"text\":\"mysql\",\"link\":\"/数据库/mysql\"},{\"text\":\"redis\",\"link\":\"/数据库/redis\"},{\"text\":\"mongodb\",\"link\":\"/数据库/mongodb\"},{\"text\":\"postgresql\",\"link\":\"/数据库/postgresql\"}],\"collapsed\":true},{\"text\":\"人工智能\",\"items\":[{\"text\":\"人工智能\",\"link\":\"/人工智能/人工智能\"}],\"collapsed\":true},{\"text\":\"面试\",\"items\":[{\"text\":\"面试\",\"link\":\"/面试\"},{\"text\":\"面试题2024\",\"link\":\"/面试题2024\"}],\"collapsed\":true}]},\"/data/工具\":{\"base\":\"/data/工具\",\"items\":[{\"text\":\"工具\",\"items\":[{\"text\":\"工具\",\"link\":\"/工具\"},{\"text\":\"操作系统\",\"link\":\"/操作系统\"},{\"text\":\"markdown\",\"link\":\"/markdown\"}]},{\"text\":\"代码管理\",\"items\":[{\"text\":\"git\",\"link\":\"/代码管理/git\"}],\"collapsed\":true}]},\"/data/后端/编程语言/java\":{\"base\":\"/data/后端/编程语言/java\",\"items\":[{\"text\":\"\",\"items\":[{\"text\":\"java\",\"link\":\"/java\"},{\"text\":\"jdk\",\"link\":\"/jdk\"},{\"text\":\"spring\",\"link\":\"/spring\"},{\"text\":\"orm\",\"link\":\"/orm\"},{\"text\":\"开发工具\",\"base\":\"/data/后端/编程语言/java/开发工具\",\"items\":[{\"text\":\"idea\",\"link\":\"/idea\"},{\"text\":\"ai\",\"link\":\"/ai\"},{\"text\":\"包管理工具\",\"link\":\"/包管理工具\"}]}]}]},\"/data/link\":{\"base\":\"/data\",\"items\":[{\"text\":\"联系方式\",\"items\":[{\"text\":\"联系方式\",\"link\":\"/link\"}]}]},\"/data/readme\":{\"base\":\"/data\",\"items\":[{\"text\":\"了解更多\",\"items\":[{\"text\":\"了解更多\",\"link\":\"/readme\"}]}]}},\"aside\":true,\"outlineTitle\":\"当前页导航\",\"outline\":\"deep\",\"socialLinks\":[{\"icon\":{\"svg\":\"<svg t=\\\"1693494709184\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"6615\\\" width=\\\"200\\\" height=\\\"200\\\"><path d=\\\"M99 679.1c-7.2 0-14-4.4-16.8-11.5-5.1-13.1-9.6-26.6-13.5-40.2-2.7-9.6 2.8-19.5 12.4-22.3 9.6-2.7 19.5 2.8 22.3 12.4 3.6 12.5 7.8 25 12.4 37.1 3.6 9.3-1 19.7-10.3 23.3-2.1 0.8-4.3 1.2-6.5 1.2z\\\" fill=\\\"\\\" p-id=\\\"6616\\\"></path><path d=\\\"M512 953.4c-86.2 0-165.4-20-235.4-59.4-66-37.2-121.5-91.5-160.6-157-5.1-8.5-2.3-19.6 6.2-24.7 8.5-5.1 19.6-2.3 24.7 6.2C222.4 844.9 355.4 917.4 512 917.4c240.8 0 417.2-170.5 425.7-408H86.4c0.5 12.7 1.5 25.3 2.9 37.7 1.2 9.9-5.9 18.8-15.7 20-9.9 1.2-18.8-5.9-20-15.8-2.3-19.7-3.5-39.8-3.5-59.9 0-9.9 8.1-18 18-18h888c9.9 0 18 8.1 18 18 0 125.2-45.3 241-127.6 326.1-41.4 42.8-90.6 76.3-146.2 99.5-58 24.1-121.4 36.4-188.3 36.4zM693.1 285.9c-7.8 0-15.1-5.2-17.3-13.1-21-74.1-89.5-125.8-166.6-125.8s-145.6 51.7-166.6 125.8c-2.7 9.6-12.7 15.1-22.2 12.4-9.6-2.7-15.1-12.7-12.4-22.2 12.2-42.9 38.5-81.6 74.1-108.9 36.8-28.2 80.8-43.1 127.2-43.1 46.4 0 90.4 14.9 127.2 43.1 35.6 27.3 61.9 66 74.1 108.9 2.7 9.6-2.8 19.5-12.4 22.2-1.8 0.5-3.4 0.7-5.1 0.7z\\\" fill=\\\"\\\" p-id=\\\"6617\\\"></path><path d=\\\"M908.7 509.4H116.3c-7.9 0-14.9-5.2-17.2-12.7-4.4-14.4-6.6-29.3-6.6-44.4 0-37.7 13.9-73.8 39.2-101.8 21.9-24.3 50.9-40.6 82.6-47 6.6-32.1 23.1-61.5 47.4-84 25.9-24 59.1-38.6 94.1-41.5 39.6-42.6 95-66.9 153.4-66.9 59.3 0 115.3 24.9 154.9 68.7 35.3 1.8 69 15.3 95.7 38.6 25.2 21.9 42.7 51.1 50.2 83.3 32 7.5 61 25 82.8 50.1 24.9 28.6 38.6 65.3 38.6 103.3 0 13.9-1.8 27.8-5.4 41.1-2.1 7.7-9.2 13.2-17.3 13.2z m-778.3-36h763.7c0.9-6.1 1.4-12.3 1.4-18.4 0-59.7-44.5-111.5-103.5-120.3-7.8-1.2-14-7.3-15.1-15.2-8.8-59.3-60.7-104-120.7-104h-0.3-0.1c-5.3 0-10.4-2.4-13.8-6.4-33-39.4-81.4-62-132.8-62-50.5 0-98.3 21.9-131.3 60.2-3.3 3.8-8 6.1-13 6.2-59.9 2-110.2 48.4-117.1 107.9-1 8.4-7.6 15-16 15.8-58.9 6.3-103.3 55.8-103.3 115.1 0 7.1 0.7 14.1 1.9 21.1z\\\" fill=\\\"\\\" p-id=\\\"6618\\\"></path><path d=\\\"M416.4 288.8m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z\\\" fill=\\\"\\\" p-id=\\\"6619\\\"></path><path d=\\\"M551.5 244.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z\\\" fill=\\\"\\\" p-id=\\\"6620\\\"></path><path d=\\\"M666.8 387.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z\\\" fill=\\\"\\\" p-id=\\\"6621\\\"></path><path d=\\\"M507.3 372.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z\\\" fill=\\\"\\\" p-id=\\\"6622\\\"></path><path d=\\\"M323.2 387.6m-25.3 0a25.3 25.3 0 1 0 50.6 0 25.3 25.3 0 1 0-50.6 0Z\\\" fill=\\\"\\\" p-id=\\\"6623\\\"></path></svg>\"},\"link\":\"\"}],\"lastUpdatedText\":\"最近更新时间\",\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2023-present Evan You\"}},\"locales\":{\"root\":{\"label\":\"Chinese\",\"lang\":\"zh\"}},\"scrollOffset\":90,\"cleanUrls\":true}");</script>
    
  </body>
</html>