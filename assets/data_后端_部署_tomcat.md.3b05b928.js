import{_ as a,o as s,c as n,X as o}from"./chunks/framework.9bc23fa4.js";const l="data:image/png;base64,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",t="/learning-document-v3/assets/image-20221108162220881.667af788.png",p="/learning-document-v3/assets/image-20221108162233181.5fcb3a04.png",e="/learning-document-v3/assets/image-20221108162242507.702dad7e.png",c="/learning-document-v3/assets/image-20221108162250713.9e415967.png",g=JSON.parse('{"title":"tomcat","description":"","frontmatter":{},"headers":[],"relativePath":"data/后端/部署/tomcat.md","filePath":"data/后端/部署/tomcat.md","lastUpdated":1720420715000}'),r={name:"data/后端/部署/tomcat.md"},A=o(`<h1 id="tomcat" tabindex="-1">tomcat <a class="header-anchor" href="#tomcat" aria-label="Permalink to &quot;tomcat&quot;">​</a></h1><h2 id="基础" tabindex="-1">基础 <a class="header-anchor" href="#基础" aria-label="Permalink to &quot;基础&quot;">​</a></h2><h3 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-label="Permalink to &quot;目录结构&quot;">​</a></h3><blockquote><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">- bin</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ startup.sh (或 startup.bat)   // 启动 Tomcat 服务器的脚本</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ shutdown.sh (或 shutdown.bat) // 停止 Tomcat 服务器的脚本</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">- conf</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ server.xml                     // 主要配置文件，定义端口、连接器、虚拟主机等</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ web.xml                        // Web 应用程序的部署描述符，定义 Servlet、过滤器等</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ catalina.properties            // Tomcat 的全局属性配置文件</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ context.xml                    // 为特定的 Web 应用程序定义上下文配置</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">- lib</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ catalina.jar                   // Tomcat 核心类库</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ servlet-api.jar                // Servlet API 类库</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ jsp-api.jar                    // JSP API 类库</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ 其他库文件</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">- logs</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ catalina.out                   // 服务器的标准输出日志</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ catalina.log                   // 主要的 Tomcat 日志文件</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ localhost.log                  // 本地主机上的部署日志</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ 其他日志文件</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">- temp</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ 运行时生成的临时文件</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">- webapps</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ ROOT                          // 默认的根应用程序目录</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ examples                      // 示例应用程序</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ manager                       // 管理应用程序，用于管理和监控 Tomcat</span></span>
<span class="line"><span style="color:#A6ACCD;">  |_ host-manager                  // 虚拟主机管理应用程序</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">- work                            // 存放运行时生成的工作文件</span></span></code></pre></div></blockquote><h3 id="下载地址" tabindex="-1">下载地址 <a class="header-anchor" href="#下载地址" aria-label="Permalink to &quot;下载地址&quot;">​</a></h3><p><a href="http://archive.apache.org/dist/tomcat/tomcat-8/v8.5.30/bin/" target="_blank" rel="noreferrer">http://archive.apache.org/dist/tomcat/tomcat-8/v8.5.30/bin/</a></p><h2 id="部署" tabindex="-1">部署 <a class="header-anchor" href="#部署" aria-label="Permalink to &quot;部署&quot;">​</a></h2><h3 id="tomcat部署成window服务" tabindex="-1">tomcat部署成window服务 <a class="header-anchor" href="#tomcat部署成window服务" aria-label="Permalink to &quot;tomcat部署成window服务&quot;">​</a></h3><p>1、jdk版本要保证是64位，(不是64位没有64-bit)</p><blockquote><p><img src="`+l+`" alt="image-20221108162159623"></p></blockquote><p>2、tomcat要保证是64位并且是window版本</p><blockquote><p>比如apache-tomcat-8.5.30-windows-x64,其他版本没有service.bat<br> cmd进入这个目录，执行</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//把tomcat放入window服务</span></span>
<span class="line"><span style="color:#A6ACCD;">service</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bat install </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;"> 也可以这么写，后面指定服务名 service</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bat install tomcat8</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//把tomcat移除window服务</span></span>
<span class="line"><span style="color:#A6ACCD;">service</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bat uninstall</span></span></code></pre></div><p><img src="`+t+'" alt="image-20221108162220881"></p></blockquote><p>3、改成自动，开机就会自动启动了</p><blockquote><p><img src="'+p+'" alt="image-20221108162233181"><img src="'+e+'" alt="image-20221108162242507"></p></blockquote><p>4、其他</p><blockquote><p>tomcat下log这个可以查看为啥没启动成功 <img src="'+c+`" alt="image-20221108162250713"></p></blockquote><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="版本问题" tabindex="-1">版本问题 <a class="header-anchor" href="#版本问题" aria-label="Permalink to &quot;版本问题&quot;">​</a></h3><blockquote><p>请求URL需要对大括号处理,8版本以后tomcat 不支持大括号，7好像不支持 还不确定</p></blockquote><h3 id="编码-todo" tabindex="-1">编码 (todo) <a class="header-anchor" href="#编码-todo" aria-label="Permalink to &quot;编码 (todo)&quot;">​</a></h3><blockquote><p>1、不同tomcat版本默认编码不一样<br> tomcat 修改编码 URIEncoding=&quot;UTF-8&quot;<br> 不同版本存在不生效问题<br><strong>URIEncoding</strong>：上面的意思是说URL编码如果未被指定，将使用默认（缺省的）ISO-8859-1 编码<br><strong>useBodyEncodingForURI</strong>：useBodyEncodingForURI默认值是&quot;false&quot;,如果修改成&quot;true&quot;,那么程序中设置（request设置编码）何种编码方式，URL就以何种编码解码。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Connector</span><span style="color:#A6ACCD;"> port</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8080</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  protocol</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">HTTP/1.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> connectionTimeout</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">20000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> redirectPort</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8443</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> URIEncoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> useBodyEncodingForURI</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/&gt;</span></span></code></pre></div><p>2、后端修改编码低版本支持修改，高版本修改会不生效并且有默认值，用流的方式返回可以设置编码 注意：<strong>Servlet 会自动将这里的流关闭</strong>。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">byte</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">byte</span><span style="color:#89DDFF;">[])</span><span style="color:#A6ACCD;">downloadResp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">OutputStream</span><span style="color:#A6ACCD;"> stream </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getOutputStream</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setContentType</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text/plain</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span><span style="color:#89DDFF;font-style:italic;">break</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    stream</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">write</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    stream</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">flush</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    stream</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span></span></code></pre></div></blockquote><h3 id="war包直接放到webapp下面不一定能访问到接口" tabindex="-1">war包直接放到webapp下面不一定能访问到接口 <a class="header-anchor" href="#war包直接放到webapp下面不一定能访问到接口" aria-label="Permalink to &quot;war包直接放到webapp下面不一定能访问到接口&quot;">​</a></h3><blockquote><p>解决方法：<br> 项目在intellij idea里配置tomcat可以启动访问, 打成war包丢到tomcat webapps下能启动却访问不了相关的接口<br> ​ 这个问题是因为idea会默认将项目以ROOT为目录的文件<br> ​ 而丢到tomcat的webapps下面则是解压成你项目名称为目录的文件，和ROOT是同级的<br> ​ 可以有以下几种解决方案<br> ​ 一：将你的war名称改成作为ROOT.war<br> ​ 二：在tomcat的server.xml文件的Host标签内配置<br> ​ 三：用tomcat发布时，将前端请求的路径加上你的项目名称</p></blockquote>`,23),i=[A];function D(y,C,m,d,F,u){return s(),n("div",null,i)}const h=a(r,[["render",D]]);export{g as __pageData,h as default};
