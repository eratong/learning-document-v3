import{_ as s,o as a,c as n,X as l}from"./chunks/framework.9bc23fa4.js";const F=JSON.parse('{"title":"orm框架","description":"","frontmatter":{},"headers":[],"relativePath":"data/后端/编程语言/java/orm.md","filePath":"data/后端/编程语言/java/orm.md","lastUpdated":1720424770000}'),e={name:"data/后端/编程语言/java/orm.md"},p=l(`<h1 id="orm框架" tabindex="-1">orm框架 <a class="header-anchor" href="#orm框架" aria-label="Permalink to &quot;orm框架&quot;">​</a></h1><h3 id="mybatis" tabindex="-1">Mybatis <a class="header-anchor" href="#mybatis" aria-label="Permalink to &quot;Mybatis&quot;">​</a></h3><hr><h3 id="mybatis-plus" tabindex="-1">Mybatis-plus <a class="header-anchor" href="#mybatis-plus" aria-label="Permalink to &quot;Mybatis-plus&quot;">​</a></h3><hr><h3 id="mybatis-flex" tabindex="-1">Mybatis-flex <a class="header-anchor" href="#mybatis-flex" aria-label="Permalink to &quot;Mybatis-flex&quot;">​</a></h3><hr><h3 id="jooq" tabindex="-1">Jooq <a class="header-anchor" href="#jooq" aria-label="Permalink to &quot;Jooq&quot;">​</a></h3><hr><h3 id="spring-data-jpa" tabindex="-1">Spring data JPA <a class="header-anchor" href="#spring-data-jpa" aria-label="Permalink to &quot;Spring data JPA&quot;">​</a></h3><p>官网 <a href="https://springdoc.cn/spring-data-jpa/" target="_blank" rel="noreferrer">https://springdoc.cn/spring-data-jpa/</a> <br> Spring Data JPA 可以理解为 JPA 规范的再次封装抽象，底层还是使用了 Hibernate 的 JPA 技术实现。</p><h4 id="java中使用jpa" tabindex="-1">JAVA中使用JPA <a class="header-anchor" href="#java中使用jpa" aria-label="Permalink to &quot;JAVA中使用JPA&quot;">​</a></h4><h5 id="新增" tabindex="-1">新增 <a class="header-anchor" href="#新增" aria-label="Permalink to &quot;新增&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">例 userRepository</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">save</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">newUser</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="删除" tabindex="-1">删除 <a class="header-anchor" href="#删除" aria-label="Permalink to &quot;删除&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 单个删除</span></span>
<span class="line"><span style="color:#A6ACCD;">deleteBy</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">removeBy 后面跟要查询的字段名，用于精确匹配。</span></span>
<span class="line"><span style="color:#A6ACCD;">delete</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">remove 后面跟要查询的字段名，使用条件表达式进行模糊匹配。</span></span>
<span class="line"><span style="color:#A6ACCD;">例 </span><span style="color:#82AAFF;">deleteByUsername</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 批量删除</span></span>
<span class="line"><span style="color:#A6ACCD;">deleteInBatch 根据传入的集合批量删除记录</span></span>
<span class="line"><span style="color:#A6ACCD;">例 </span><span style="color:#82AAFF;">deleteInBatch</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Collection</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">User</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> users</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="更新" tabindex="-1">更新 <a class="header-anchor" href="#更新" aria-label="Permalink to &quot;更新&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">updateBy 后面跟要查询的字段名，用于精确匹配。</span></span>
<span class="line"><span style="color:#A6ACCD;">update 后面跟要查询的字段名，使用条件表达式进行模糊匹配。</span></span>
<span class="line"><span style="color:#A6ACCD;">    支持的关键字：</span></span>
<span class="line"><span style="color:#A6ACCD;">    Set：用于设置要更新的字段的值。</span></span>
<span class="line"><span style="color:#A6ACCD;">    Where：用于指定更新操作的条件。</span></span>
<span class="line"><span style="color:#A6ACCD;">例 </span><span style="color:#82AAFF;">updateByUsername</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="查询" tabindex="-1">查询 <a class="header-anchor" href="#查询" aria-label="Permalink to &quot;查询&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">findBy</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">getBy</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">queryBy</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">readBy 后面跟要查询的字段名，用于精确匹配。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByUsername</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">find</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">get</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">query</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">read 后面跟要查询的字段名，使用条件表达式进行模糊匹配。</span></span>
<span class="line"><span style="color:#A6ACCD;">findAll</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">getAll 后面不跟字段名，表示查询所有记录。</span></span>
<span class="line"><span style="color:#A6ACCD;">支持的关键字：</span></span>
<span class="line"><span style="color:#A6ACCD;">    And：连接多个查询条件，相当于 SQL 中的 AND。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByUsernameAndPassword</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> password</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    Or：连接多个查询条件，相当于 SQL 中的 OR。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByUsernameOrPassword</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> password</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    Between：用于查询字段在某个范围内的记录。</span></span>
<span class="line"><span style="color:#A6ACCD;">    LessThan</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">LessThanEqual：用于查询字段小于某个值的记录。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByAgeLessThan</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> age</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    GreaterThan</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">GreaterThanEqual：用于查询字段大于某个值的记录。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByAgGreaterThan</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> age</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    IsNull</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">IsNotNull：用于查询字段为空或不为空的记录。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByEmailIsNull</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    Like</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">NotLike：用于模糊查询字段值。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByUsernameLike</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    OrderBy：用于指定查询结果的排序方式。</span></span>
<span class="line"><span style="color:#A6ACCD;">        例 </span><span style="color:#82AAFF;">findByAgeOrderByLastNameAsc</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> age</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">组合</span></span>
<span class="line"><span style="color:#A6ACCD;">例 </span><span style="color:#C792EA;">Data</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findFirstByNameIsStartingWithAndStatusNotOrderByType</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Integer</span><span style="color:#A6ACCD;"> Status</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h5 id="统计" tabindex="-1">统计 <a class="header-anchor" href="#统计" aria-label="Permalink to &quot;统计&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">countBy 后面跟要查询的字段名，用于精确匹配。</span></span>
<span class="line"><span style="color:#A6ACCD;">count 后面不跟字段名，表示统计所有记录数。</span></span>
<span class="line"><span style="color:#A6ACCD;">例 </span><span style="color:#82AAFF;">countByUsername</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">);</span></span></code></pre></div><h5 id="自定义" tabindex="-1">自定义 <a class="header-anchor" href="#自定义" aria-label="Permalink to &quot;自定义&quot;">​</a></h5><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Repository</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserRepository</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">JpaRepository</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">User</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Long</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 自定义查询方法</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SELECT u FROM User u WHERE u.username = ?1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findByUsernameCustom</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">username</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="底层原理" tabindex="-1">底层原理 <a class="header-anchor" href="#底层原理" aria-label="Permalink to &quot;底层原理&quot;">​</a></h4><p>核心类 CrudRepository</p><h4 id="日志配置" tabindex="-1">日志配置 <a class="header-anchor" href="#日志配置" aria-label="Permalink to &quot;日志配置&quot;">​</a></h4><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">logger name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">org.hibernate.SQL</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> level</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DEBUG</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/&gt;</span></span></code></pre></div><p>参考文档 <a href="https://juejin.cn/post/7366972839780941874?searchId=202406271456062DC2D23377089BD6136B" target="_blank" rel="noreferrer">https://juejin.cn/post/7366972839780941874?searchId=202406271456062DC2D23377089BD6136B</a></p><hr><h3 id="spring-jdbctemplate" tabindex="-1">Spring JdbcTemplate <a class="header-anchor" href="#spring-jdbctemplate" aria-label="Permalink to &quot;Spring JdbcTemplate&quot;">​</a></h3><hr><h3 id="spring-jdbcclient" tabindex="-1">Spring JdbcClient <a class="header-anchor" href="#spring-jdbcclient" aria-label="Permalink to &quot;Spring JdbcClient&quot;">​</a></h3><hr><h3 id="hibernate" tabindex="-1">Hibernate <a class="header-anchor" href="#hibernate" aria-label="Permalink to &quot;Hibernate&quot;">​</a></h3><hr><p>参考文档 <a href="https://juejin.cn/post/7366972839780941874?searchId=202406271456062DC2D23377089BD6136B" target="_blank" rel="noreferrer">https://juejin.cn/post/7366972839780941874?searchId=202406271456062DC2D23377089BD6136B</a></p>`,37),o=[p];function t(r,c,i,y,A,D){return a(),n("div",null,o)}const d=s(e,[["render",t]]);export{F as __pageData,d as default};
